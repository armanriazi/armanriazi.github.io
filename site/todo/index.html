
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/attachments/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.9">
    
    
      
        <title>Todo - Arman Riazi</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.120efc48.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/mkdocs-extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utxo-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://armanriazi.github.io/" title="Arman Riazi" class="md-header__button md-logo" aria-label="Arman Riazi" data-md-component="logo">
      
  <img src="../assets/attachments/me.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arman Riazi
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Todo
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/armanriazi/armanriazi.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../public/blockchain/Blockchain/" class="md-tabs__link">
        Blockchain
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../public/public/" class="md-tabs__link">
        Walk-through
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../achievements/" class="md-tabs__link">
        Achievements
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../tags/" class="md-tabs__link">
        Tags
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../links/" class="md-tabs__link">
        Links
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://armanriazi.github.io/" title="Arman Riazi" class="md-nav__button md-logo" aria-label="Arman Riazi" data-md-component="logo">
      
  <img src="../assets/attachments/me.png" alt="logo">

    </a>
    Arman Riazi
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/armanriazi/armanriazi.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" data-md-state="indeterminate" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public/public/" class="md-nav__link">
        Walk-through
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Blockchain
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Blockchain" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Blockchain
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public/blockchain/Blockchain/" class="md-nav__link">
        Blockchain
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Walk-through
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Walk-through" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Walk-through
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public/public/" class="md-nav__link">
        Walk-through
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Achievements
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Achievements" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Achievements
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../achievements/" class="md-nav__link">
        Achievements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Tags
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tags" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Tags
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tags/" class="md-nav__link">
        Tags
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" data-md-state="indeterminate" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Links
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Links" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Links
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../links/" class="md-nav__link">
        Links
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#for-chain-equals-dev-validator" class="md-nav__link">
    for - - chain equals dev - - validator
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/armanriazi/armanriazi.github.io/edit/master/docs/todo.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  



<p>okay so I want to set a few
expectations</p>
<p>I wasn't I wasn't sort of expecting to</p>
<p>stand at the front and give any sort
of</p>
<p>talks so not very much is is is ready
in</p>
<p>that regard it's really meant to be a</p>
<p>workshop for kind of rough coding I</p>
<p>wanted to get some people whoever</p>
<p>brought their laptop sort of up to
speed</p>
<p>maybe get substrate downloaded and
built</p>
<p>and sort of take take people through</p>
<p>maybe deploying deploying a new chain</p>
<p>maybe writing some modules Sergei here</p>
<p>is going to sort of give some give a</p>
<p>demonstration of how to deploy a smart</p>
<p>contract on our smart contract based</p>
<p>substrate base smart contract chain so</p>
<p>yeah don't expect too much hand
holding</p>
<p>on this what else yeah I figured</p>
<p>actually I would put it to the
audience</p>
<p>what it is that you would prefer to
see</p>
<p>and do do like remember that you know
if</p>
<p>you say ah we'd like to see a new</p>
<p>substrate module being done or I'd
like</p>
<p>to see how you develop the UI or how I</p>
<p>would see something else it is gonna
be</p>
<p>me sort of bashing away on a keyboard</p>
<p>for 85% at the time and if you don't</p>
<p>have a keyboard to bash away with</p>
<p>in-concert then it's it's going to be</p>
<p>pretty boring but feel free to to ask
me</p>
<p>to demonstrate or sort of educate on</p>
<p>what substrate does and how it works
and</p>
<p>I'll try and use my now freshly
compiled</p>
<p>substrate code base to help</p>
<p>help explain any so any any requests
no</p>
<p>requests yep</p>
<p>Adrian I certainly car would be my</p>
<p>greatest pleasure to you to walk
through</p>
<p>and anything beyond walking through</p>
<p>JavaScript's sorry walking through</p>
<p>substrate models in JavaScript yeah
sure</p>
<p>okay</p>
<p>sure yep</p>
<p>that's gonna be a month or two before
we</p>
<p>we've already done over that but yeah</p>
<p>you can expect that in the new year
it's</p>
<p>good that Rob's not here otherwise you</p>
<p>might meet cringing right now sure
yeah</p>
<p>okay I guess there's a few things
there</p>
<p>to be working on okay let's start with</p>
<p>the the last question because that's
the</p>
<p>one I can remember the easiest so if
we</p>
<p>if we had to depart the code base is</p>
<p>this can you actually read that or</p>
<p>should i zoom in a bit better or some</p>
<p>more yeah okay cause like the more i</p>
<p>zoom the less the less easier for me</p>
<p>it's gonna be boring it can also make</p>
<p>more space are a horizontal space yeah</p>
<p>okay cool yeah so a you TXO model it's</p>
<p>an interesting sort of one and one
that</p>
<p>we have just about begun prototyping
in</p>
<p>parity we've got a team of like two or</p>
<p>three people working on it basically
the</p>
<p>bitcoin style you </p>
<h1 id="utxo-model">UTXO model<a class="headerlink" href="#utxo-model" title="Permanent link">&para;</a></h1>
<p>is kind of an interesting hybrid between the</p>
<p>stripped/stricked all full nodes must validate</p>
<p>everything and and base their
validation</p>
<p>they the things that they validate
sort</p>
<p>of they put a state route/root a storage</p>
<p>route if you like state route into
each</p>
<p>block header and that means that like</p>
<p>clients when they come along they can</p>
<p>actually in principle validate</p>
<p>everything all of the state transition</p>
<p>logic of every block based purely upon</p>
<p>the state route of the last block
right</p>
<p>so if you trust that the header of the</p>
<p>last block is something or other then</p>
<p>you can check that state route and you</p>
<p>can come you can be provided with a</p>
<p>proof that all of the transactions on</p>
<p>the current block where executed</p>
<p>correctly and therefore that the state</p>
<p>route on the current block is is
correct</p>
<p>and polka dot very much uses this
model</p>
<p>it's the model that the power chains
are</p>
<p>based around and it basically means
that</p>
<p>validators by having just like client</p>
<p>logic can actually validate every
power</p>
<p>chain equally</p>
<p>I'm bitcoins a little different in</p>
<p>principle if you trust the previous</p>
<p>blocks header you can still be
provided</p>
<p>with a proof that the current block is</p>
<p>valid but the proof is potentially all</p>
<p>of the Bitcoin blockchain and
therefore</p>
<p>not super concise this it's this is
the</p>
<p>case because Bitcoin doesn't keep a</p>
<p>track of the current state at every</p>
<p>block and place that in the header as
a</p>
<p>cryptographic hash rather when you
want</p>
<p>to so make some transaction on Bitcoin</p>
<p>and prove that it's a valid
transaction</p>
<p>you use unspent transaction outputs
and</p>
<p>those are outputs that it is expected</p>
<p>that nodes will record in their
database</p>
<p>but if you want the actual proof that</p>
<p>those outputs are valid you have to go</p>
<p>all the way back to the block where
they</p>
<p>were they were the outputs from a
spend</p>
<p>in order to be sure that that they're</p>
<p>legit and obviously you have to see
the</p>
<p>entire chain between now and then in</p>
<p>order to be sure that they weren't
spent</p>
<p>already so it's it's much harder to do
a</p>
<p>you TXO model in literally the same
vein</p>
<p>as Bitcoin because this kind of light</p>
<p>client sort of model doesn't doesn't</p>
<p>quite extend to the conciseness
theorems</p>
<p>does that said if you instead store
the</p>
<p>unspent transaction outputs in a
murkily</p>
<p>structure in the same way that
aetherium</p>
<p>stores its contract state then you are</p>
<p>able to basically get a hash of that</p>
<p>structure every block and you can you</p>
<p>can provide concise proofs that a</p>
<p>particular transaction is valid
because</p>
<p>you can see the you can demonstrate
that</p>
<p>those and spent transaction outputs</p>
<p>appear in this localized structure and</p>
<p>that's how we would implement a u TXO</p>
<p>style chain within the para chain
model</p>
<p>and probably how we would implement it</p>
<p>in substrate and that's actually going</p>
<p>forward how its</p>
<p>we built in principle though as I said</p>
<p>that you could introduce a raw
database</p>
<p>into substrate and actually mimic</p>
<p>bitcoins model but it would preclude</p>
<p>turning it into a para chain without</p>
<p>adding some additional layers of</p>
<p>indirection and likely are not likely</p>
<p>enough trust which we're not so keen
on</p>
<p>introducing programmatically speaking</p>
<p>you'd introduce a UT EXO's at if we go</p>
<p>into the code base so I mentioned
before</p>
<p>like substrate has three levels of
kind</p>
<p>of you can dive into substrate of
three</p>
<p>levels so you can dive into at the
core</p>
<p>which is right there oh and this is if</p>
<p>you use substrate you use substrate
core</p>
<p>and it's got all of the things that
you</p>
<p>would expect to see in a in a block</p>
<p>chain if we look at the modules or the</p>
<p>crates as Arista falls them then we
you</p>
<p>know you can see things like the</p>
<p>consensus and the finality and the</p>
<p>keystore and the networking and the
our</p>
<p>PCs and so forth</p>
<p>it would likely be implemented as a</p>
<p>outside of the SRM L so the SRM L is</p>
<p>here because the SRM L is rather</p>
<p>designed around a an account and an</p>
<p>index model similar to aetherium in</p>
<p>principle you could nonetheless create</p>
<p>some additional SRM l modules that
kind</p>
<p>of introduce you to EXO's I mean in</p>
<p>principle as modules of
turing-complete</p>
<p>they've got entry point functions that</p>
<p>can be arbitrary bodies and they've
got</p>
<p>they can they can do basically
anything</p>
<p>with storage that they want so there's</p>
<p>no reason that you couldn't implement
it</p>
<p>that way but it'd probably be a bit
more</p>
<p>efficient and make a bit more sense</p>
<p>if you implement it as its own runtime</p>
<p>and to do it as its own runtime you</p>
<p>would basically just</p>
<p>use the underlying abstractions in
core</p>
<p>that were used in order to pass in
order</p>
<p>to allow things like the execute block</p>
<p>function to be to be implemented and
for</p>
<p>it to be called into by the the rest
of</p>
<p>the client and and work with that</p>
<p>directly and you define your own block</p>
<p>format and your own transaction format</p>
<p>and in general build the execute block</p>
<p>function and that's in Bitcoin from
from</p>
<p>scratch where as I say parity is is</p>
<p>pushing forward with its with a you
TXO</p>
<p>chain mostly so partly to make sure
that</p>
<p>the model that we have is actually</p>
<p>general it's it's a good sort of
sanity</p>
<p>check and partly because we actually</p>
<p>want to introduce a payment based
system</p>
<p>that's that's a sorry a payment system</p>
<p>that's based around you TX owes and</p>
<p>potentially that has some sort of ZK</p>
<p>snark functionality in as well and
we're</p>
<p>doing that with the by reusing as much</p>
<p>of the PBGC block parity Bitcoin and</p>
<p>code bases become cool I'm not going
to</p>
<p>start implementing one here am i okay</p>
<p>maybe laters cool</p>
<p>what were the other three questions</p>
<p>theorem compatibility yeah so how does</p>
<p>the RPC RPC and JavaScript work this
is</p>
<p>a yeah this is an interesting question</p>
<p>so substrates meant to be pretty
generic</p>
<p>and if we go to the RBC module it's</p>
<p>split into four four sub sub modules</p>
<p>author chain state and system author
is</p>
<p>to do with block authoring and it</p>
<p>contains have a look what it contains</p>
<p>submit</p>
<p>extrinsic there's a couple formats you</p>
<p>can submit them in and a Ana pub/sub
to</p>
<p>let you watch what's happening with</p>
<p>those extrinsic s-- so if you actually</p>
<p>want to inter inter oh if you want to</p>
<p>communicate with substrate through the</p>
<p>AH feces then these are the RPC is</p>
<p>you're going to use and it's basically</p>
<p>like here's an extrinsic it's already</p>
<p>signed it's already done and dusted
just</p>
<p>submit it broadcast it whatever and
let</p>
<p>me know how it goes and you from this</p>
<p>you'll get back various messages I
think</p>
<p>I know they were on the have a look</p>
<p>maybe I've got some messages yeah I</p>
<p>don't</p>
<p>you'll get various messages to tell
you</p>
<p>that it's been validated that it's
been</p>
<p>broadcast that or that it's about to
be</p>
<p>broadcast that it's been broadcast and</p>
<p>that it's been finalized or if it</p>
<p>doesn't get finalized if something
else</p>
<p>gets finalized in its place and that</p>
<p>it's now been dumped then you'll be</p>
<p>again told that it's been okay so back</p>
<p>to substrate 101 yes right to make to</p>
<p>make substrate be as general as
possible</p>
<p>we didn't want to introduce data into</p>
<p>the block header that may not be in</p>
<p>every block chain that substrate that</p>
<p>need not be in every block chain that</p>
<p>substrate is gonna cater for rather we</p>
<p>want to make the header strictly the</p>
<p>information that is required for</p>
<p>substrate and the rest of the rest of</p>
<p>the information that might otherwise
go</p>
<p>into a header in normal block chains
for</p>
<p>example the timestamp instead is</p>
<p>provided under a separate model that's</p>
<p>outside of the header called the</p>
<p>extrinsic and extrinsic just mean that</p>
<p>it's like data that is extrinsic to
the</p>
<p>block chain so it's not it's not</p>
<p>intrinsic to the chain</p>
<p>it's not like part of its state or</p>
<p>anything like that it's not a previous</p>
<p>transaction or anything that it can
draw</p>
<p>upon directly but rather it's just
data</p>
<p>from the external world is extrinsic
to</p>
<p>the chain and so data from the
external</p>
<p>world is provided in this set of of</p>
<p>snippets of pieces and each piece is</p>
<p>called extra and extrinsic and it's
just</p>
<p>short for a piece of extra piece of
data</p>
<p>extrinsic to the chain so right so</p>
<p>specifically the transactions that are</p>
<p>coming in coming in from the external</p>
<p>world they are indeed extrinsic</p>
<p>so most block chains possibly all</p>
<p>require there they're sort of</p>
<p>transactions to be signed like they
have</p>
<p>a particular signature scheme and if</p>
<p>they're not signed or if the
signatures</p>
<p>wrong then they'll never be considered</p>
<p>they won't even make it into the
system</p>
<p>substrates a bit different so
substrate</p>
<p>says extrinsic scan there are
perfectly</p>
<p>valid extrinsic s-- that are not
signed</p>
<p>they're extrinsic the only thing
special</p>
<p>about them is that they're a bit of
data</p>
<p>and they come with some way of</p>
<p>determining their length upfront so
you</p>
<p>you know you can pass them around on
the</p>
<p>network without worrying how long they</p>
<p>are other than that they're they're
just</p>
<p>arbitrary bits of data they may be</p>
<p>signed they may include a signature
they</p>
<p>may include a multi-sig they may not
it</p>
<p>doesn't really matter some pieces of</p>
<p>data for example the timestamp so</p>
<p>there's literal okay I can think of
very</p>
<p>easy Taric ways how you might possibly</p>
<p>argue that a timestamp could be signed</p>
<p>and that would make it valid like
maybe</p>
<p>if the the what's at the atoll the
guys</p>
<p>are on the atomic clocks like maybe</p>
<p>signed it with one of the keys but
still</p>
<p>someone could steal the keys and then</p>
<p>the signature it doesn't make it</p>
<p>specifically valid nothing can make a</p>
<p>timestamp specifically valid right
it's</p>
<p>a piece of data from the external
world</p>
<p>and the only thing that means a time</p>
<p>star</p>
<p>is correct as if we all agree that
it's</p>
<p>correct what time is it right now well
I</p>
<p>can say well it's 38 minutes past 6:00</p>
<p>in the evening but it's if your watch</p>
<p>says that it's 37 minutes past 6:00
then</p>
<p>you know there is no way how without</p>
<p>like finding a shared Authority
there's</p>
<p>no way how we can argue that one is
more</p>
<p>correct than another and certainly</p>
<p>signing it isn't going to help all
three</p>
<p>authors just an arbitrary name that we</p>
<p>call when we say author we just mean</p>
<p>block author so this is a block</p>
<p>authoring API this is an a this is an</p>
<p>RPC that you use when you want to</p>
<p>interact with the bit of substrate
that</p>
<p>is authoring blocks and this is
actually</p>
<p>incorrectly named it's very good that</p>
<p>you brought it up it shouldn't be
called</p>
<p>extrinsic s-- or at least it's it's
it's</p>
<p>a little over general to call the</p>
<p>extrinsic the only extrinsic that you</p>
<p>can submit using this API are</p>
<p>specifically signed extrinsic because</p>
<p>it's coming from the RPC and therefore</p>
<p>you have no other way other than
looking</p>
<p>for a signature to know that it's</p>
<p>anything that's really sensible
unsigned</p>
<p>extrinsic switch for what it's worth
we</p>
<p>call inherence because they are we
treat</p>
<p>them as being inherently valid are are</p>
<p>generated within substrate so
extrinsic</p>
<p>s-- is information that come from the</p>
<p>outside of substrate and inherent are</p>
<p>our extrinsic that come from within</p>
<p>substrate and sorry transactions
really</p>
<p>come from the outside inherent come
from</p>
<p>with them they're both forms of</p>
<p>extrinsic because they're both forms
of</p>
<p>data that can be introduced to the</p>
<p>blockchain and that might make some</p>
<p>sense to the runtime now if you don't
if</p>
<p>you don't sign some data then it's
like</p>
<p>well</p>
<p>you know how does that how does that</p>
<p>possibly work you know data's not
signed</p>
<p>then it could be anything right and
the</p>
<p>way that it works is the validators so</p>
<p>the guys that basically say that this</p>
<p>block is valid are the ones that get
to</p>
<p>be opinionated over whether this data
is</p>
<p>sensible or not and that's actually
how</p>
<p>this works in other blockchains as
well</p>
<p>so if you look to aetherium if the
time</p>
<p>stamp is actually just an opinion
right</p>
<p>a validator when they validate an</p>
<p>aetherium block have an opinion over</p>
<p>whether this time stamp is sensible or</p>
<p>not and if it's not sensible they
ignore</p>
<p>the block they unilaterally decide to</p>
<p>ignore the block and in in that sense</p>
<p>substrate is equivalent in its
treatment</p>
<p>of inherent if a is up to a validator</p>
<p>when they're proposing the block to
put</p>
<p>in sensible inherence and if they
don't</p>
<p>put in sensible inherence if there's</p>
<p>inherent in correct or incorrect in
the</p>
<p>opinion of the other validators then</p>
<p>their block will be considered useless</p>
<p>and won't get any further attention so</p>
<p>it's up to them to put in sensible</p>
<p>values for the inherent extrinsic that</p>
<p>are required by the block and this</p>
<p>basically means that we can do all
sorts</p>
<p>of interesting stuff aside from time</p>
<p>stamps I mean time stamps are the
first</p>
<p>use but we can do things like for</p>
<p>example with para chained candidates
for</p>
<p>the polkadot relay chain there are</p>
<p>that's another form of inherence why</p>
<p>because which candidates you choose in</p>
<p>order to in order to to be to be</p>
<p>therefore finalizing is necessarily an</p>
<p>opinion right it's different
validators</p>
<p>might choose different para chained</p>
<p>candidate blocks to be finalized for</p>
<p>that particular relay chain block</p>
<p>there's no way of deterministic elite</p>
<p>oozing the correct set of these guys</p>
<p>it's just whichever ones happen to
come</p>
<p>come by you but if you put forward</p>
<p>blocks that the other validators on
the</p>
<p>relay chain think are invalid perhaps</p>
<p>pick</p>
<p>they don't have the Associated data</p>
<p>because there's no data availability
for</p>
<p>them or just perhaps because they're</p>
<p>empty perhaps because they they just</p>
<p>haven't seen them before whatever
reason</p>
<p>it is if they don't think that your</p>
<p>opinion is is a good one over the</p>
<p>selection of these blocks and they're</p>
<p>free to ignore you in reality you know</p>
<p>they'd have to be quite malevolent</p>
<p>before they do ignore valid blocks</p>
<p>because they get paid basically for</p>
<p>passing these things but by and large</p>
<p>it's up to the validators to
self-police</p>
<p>the content of the inherent
transactions</p>
<p>the the sorry the inherent extrinsic
s--</p>
<p>for the transaction extrinsic s--
there</p>
<p>they are per se valid or invalid like</p>
<p>you can check whether a transaction is</p>
<p>valid by virtue of does it have a good</p>
<p>signature and whatever account has</p>
<p>signed it does it have enough funds at</p>
<p>this point in order to pay for the the</p>
<p>cost for it to be placed on chain and
if</p>
<p>those two answers are yes then it's
all</p>
<p>good and that's the difference between</p>
<p>the two so this is the RPC for how you</p>
<p>can submit them unlike aetherium we</p>
<p>don't provide any account management</p>
<p>stuff in here so what you can't do is</p>
<p>provide is try and get it to sign in
and</p>
<p>to sign a transaction all of the
signing</p>
<p>happens external to the node so the
node</p>
<p>is minimal</p>
<p>we do very well noticed the keystore</p>
<p>package is there specifically for for</p>
<p>block authors so far the validator
nodes</p>
<p>just stored their their block
authoring</p>
<p>keys so basically when you when you
set</p>
<p>up a node as a validator node which so
I</p>
<p>got away without doing this on the on</p>
<p>the demo that I gave earlier by using</p>
<p>the - - dev option which is shorthand</p>
<h2 id="for-chain-equals-dev-validator">for - - chain equals dev - - validator<a class="headerlink" href="#for-chain-equals-dev-validator" title="Permanent link">&para;</a></h2>
<ul>
<li>key Alice but I could have typed
those</li>
</ul>
<p>in and it would have done the same
thing</p>
<p>and so when you pass it the key it
will</p>
<p>it will use that it will basically put</p>
<p>that key into the the key store and
then</p>
<p>if it notices a key in the keystore is</p>
<p>one of the validators and it's set to</p>
<p>being a validator it will actually
start</p>
<p>signing what and and join in with the</p>
<p>consensus so that's the key store is</p>
<p>really just there for the for managing</p>
<p>validators keys for consensus yeah I
can</p>
<p>see yeah so there'll be some shims or</p>
<p>middleware in order to manage some of</p>
<p>this some of these are pcs to make to</p>
<p>make it compatible now I'll go into
I'll</p>
<p>go because this is kind of an</p>
<p>interesting exploration I think so
there</p>
<p>are a few other modules chain does</p>
<p>pretty much what you'd expect it to do</p>
<p>it's it's about blocks and headers it</p>
<p>lets you get transactions and as I
have</p>
<p>been chatting to a meal over the last</p>
<p>few weeks and months the the point of
a</p>
<p>substrate node isn't to provide a</p>
<p>generic sort of very generalized</p>
<p>database for every all of your uses
that</p>
<p>you might have I mean etherium was
kind</p>
<p>of pushing in that direction we
provided</p>
<p>all sorts of lookups that we didn't</p>
<p>really have to substrate keeps it</p>
<p>minimal it's it's got a fairly you
know</p>
<p>that's one of its Maxim's of design
and</p>
<p>one of the ways that we keep it so one</p>
<p>of the ways that this sort of minimal</p>
<p>RPC comes out is the fact that you
can't</p>
<p>look up specific transaction hashes
you</p>
<p>can I think maybe get oh yes so you
can</p>
<p>get a block and the block will come
with</p>
<p>a bunch of extrinsic sand in those</p>
<p>extrinsic will be the transactions and</p>
<p>that's that's basically if you want to</p>
<p>index if you want to have a you know
get</p>
<p>so get a transaction by its hash</p>
<p>you're gonna have to go to a chain</p>
<p>Explorer or a</p>
<p>party service provider or whatever to</p>
<p>get that now you can verify that that</p>
<p>that's the case just by getting the</p>
<p>block and transaction index and then</p>
<p>going back to your node and using this</p>
<p>RPC to get that block and then lookup</p>
<p>that index in the extrinsic and you'll</p>
<p>find your transaction or not but we're</p>
<p>not going to do that indexing for you</p>
<p>because it's too much work it's it's</p>
<p>better done on a dedicated software
yeah</p>
<p>sure</p>
<p>i-i'm sure or are all of the author
and</p>
<p>other extrinsic s-- you mean the
entire</p>
<p>chains worth</p>
<p>if the blocks not created yet then you</p>
<p>can't look it up at all when it's when</p>
<p>the blocks being executed no no no so</p>
<p>either the block has has made its way</p>
<p>into the database it's finalized then</p>
<p>it's good or you can't you can't read
it</p>
<p>at all during what sorry execution of</p>
<p>the block or well when a block
executes</p>
<p>I can show you that that that code but</p>
<p>basically there's an execute block</p>
<p>function and it gets given you get
given</p>
<p>a bunch of bytes and it's up to you to</p>
<p>execute those bytes so at the lowest</p>
<p>level so at core a core level yes SR
ml</p>
<p>it's a lot easier but that that's full</p>
<p>of a lot of opinionation that isn't</p>
<p>necessarily indicative of your chain</p>
<p>that you're writing on substrate</p>
<p>yeah yeah you just get given a bunch
of</p>
<p>bytes and that's your block and it's
up</p>
<p>to you to interpret the look of the</p>
<p>block as you as you desire okay let me</p>
<p>let me go through the are pcs and I'll</p>
<p>come back to you so yeah we can get</p>
<p>header block block hash and there's
also</p>
<p>a runtime version that should actually</p>
<p>be in state but it was a very late</p>
<p>edition Thank You Tomic Thank You
Tomic</p>
<p>we have system which just gives you a</p>
<p>bunch of information about the system</p>
<p>just the name version and the chain</p>
<p>that's basically just the the current</p>
<p>running node for example we also have</p>
<p>the JavaScript implementation of much
of</p>
<p>substrate and that will return
different</p>
<p>things from from these are PCs finally</p>
<p>as the state this is the most</p>
<p>interesting thing so again back in if
we</p>
<p>if we think about what you can query
of</p>
<p>a block of a blockchain state in other</p>
<p>block chains usually it's like account</p>
<p>balances whether an output is is spent</p>
<p>or not how much is sitting there</p>
<p>potentially some state of a contract
you</p>
<p>might even be able to make a call into
a</p>
<p>contract and have it execute we're a
bit</p>
<p>lower level with substrate as as might</p>
<p>be imagined from the fact this is a</p>
<p>library with a framework with which
you</p>
<p>build block chains but there are
things</p>
<p>that you can get from the current
state</p>
<p>of the chain are storage so we have at</p>
<p>the moment this RPC reflects a single</p>
<p>storage database so basically we have
a</p>
<p>merkel Merkel tree there is of
arbitrary</p>
<p>size keys and Val</p>
<p>in pairs right so the tree itself
stores</p>
<p>basically any key value any set of key</p>
<p>value pairs and the root is stored as</p>
<p>the state root and that goes into
every</p>
<p>block as you change the storage as we</p>
<p>change these keys and values then you</p>
<p>can that that will obviously change
the</p>
<p>state and you can make it's very handy</p>
<p>for building pair of chains because
you</p>
<p>can make very clear like client proofs</p>
<p>that one particular block with one
state</p>
<p>given these transactions that executed</p>
<p>or these extrinsic sigh should say
that</p>
<p>executed left another particular block</p>
<p>with another particular State</p>
<p>that's nothing nothing no really not</p>
<p>really any different to how etherium</p>
<p>works the main difference is that of</p>
<p>generalization and with our road map</p>
<p>that allow where we want to build</p>
<p>multiple different cryptographic</p>
<p>databases so if we if we think of the</p>
<p>Merc alized</p>
<p>key value storage that we have here as
a</p>
<p>one example of a cryptographic
database</p>
<p>then we want to actually extend this
to</p>
<p>other cryptographic databases and also</p>
<p>add a a means of having many of them
at</p>
<p>the same time so if you're familiar
with</p>
<p>how aetherium works there is a every</p>
<p>smart contract actually has its own
sort</p>
<p>of cryptographic database where it</p>
<p>stores its key value pairs it's
storage</p>
<p>if you like and and then there's one</p>
<p>sort of big one that all of these
other</p>
<p>the by virtue of them having state</p>
<p>routes all of these other databases
hang</p>
<p>off substrate only has one but it's
one</p>
<p>very general one and in principle
though</p>
<p>that can now be expanded to have as
many</p>
<p>as as is desired and they can even be
of</p>
<p>different types and they can be</p>
<p>dynamically added and removed in the</p>
<p>similar way to that you would</p>
<p>dynamically add and remove them in a</p>
<p>theory and when smart contracts go in</p>
<p>and out of existence</p>
<p>we also have metadata which is a</p>
<p>wonderful wonderful RPC that I will</p>
<p>spend some time talking about when I</p>
<p>address one of the other questions
which</p>
<p>was the color JavaScript</p>
<p>sort of magically works and finally we</p>
<p>have a pub sub for storage so you can</p>
<p>subscribe to particular storage items</p>
<p>and you can get notifications when
those</p>
<p>storage items change so if you</p>
<p>understand how storage works and
that's</p>
<p>one of the other magical things about</p>
<p>metadata that's what it kind of
provides</p>
<p>that's what it partly provides then
you</p>
<p>can basically keep an eye on that</p>
<p>storage and just be notified when that</p>
<p>entry changes yeah so Sergei can go
into</p>
<p>how smart contracts so this this
little</p>
<p>symposium will be will be split so
I'll</p>
<p>answer whatever sort of more general</p>
<p>questions about substrate and then</p>
<p>Sergey is going to do a little sort of</p>
<p>walkthrough of deploying a smart</p>
<p>contracting because explain some of
the</p>
<p>technicals behind the smart contracts</p>
<p>and we can go into the events and and</p>
<p>smart contract storage there this is</p>
<p>specifically for substrate chains as a</p>
<p>whole and this will be very likely
look</p>
<p>like the final RPC an API for para</p>
<p>chains so with smart contract so we
have</p>
<p>a smart contract module and that
exists</p>
<p>as a module within substrates SR ml so</p>
<p>you can basically make a substrate
chain</p>
<p>that can can manage smart contracts as</p>
<p>well as do a bunch of other things
like</p>
<p>have governance and all the rest of it</p>
<p>so we we kind of see smart contracts
as</p>
<p>a piece of functionality that you can</p>
<p>answer your chain or not add to your</p>
<p>chain as you see fit the</p>
<p>on your use case some use cases that</p>
<p>require a generalized sort of smart</p>
<p>contract environment some a very sort
of</p>
<p>specific fixed-function chains and if</p>
<p>their specific fixed function chains</p>
<p>then like for example a plasma chain a</p>
<p>plasma chain doesn't require a smart</p>
<p>contract modules and these smart</p>
<p>contracts in there right it's a fixed</p>
<p>function chain that would that
basically</p>
<p>manages all of the other chains
hanging</p>
<p>off it and what to do if those chains</p>
<p>want to do an early termination or or</p>
<p>settle on the upper layer so I don't</p>
<p>imagine all chains to have smart</p>
<p>contracts from finality in fact I</p>
<p>suspect many chain even perhaps a</p>
<p>majority of chains won't have smart</p>
<p>contract functionality</p>
<p>there'll be they'll settle for having</p>
<p>fixed function fixed pipe fixed block</p>
<p>processing functionality that's</p>
<p>upgradeable we like up readability
cool</p>
<p>so that's that's basically the our pcs</p>
<p>now the interesting thing is how these</p>
<p>interact with the JavaScript
environment</p>
<p>so we're developing because we like to</p>
<p>give people Choice we're developing</p>
<p>multiple JavaScript API is to interact</p>
<p>with substrate and substrate modules</p>
<p>now these api's are primarily geared</p>
<p>towards interacting with the substrate</p>
<p>runtime module library the SRM l so
they</p>
<p>are fairly their highest level right</p>
<p>there are lower level components like</p>
<p>for example you can use these pub subs</p>
<p>with promises I believe at the</p>
<p>JavaScript level but if you want to
but</p>
<p>we make it easy for you to use to
build</p>
<p>applications based around custom
modules</p>
<p>that you code in the SRM so you got a</p>
<p>taste of that although it might have</p>
<p>sort of flown past you a little bit in</p>
<p>the demo because that was trying to
get</p>
<p>it all finished and more or less on
time</p>
<p>but I don't know if you noticed but
when</p>
<p>I wrote that that little sort of toy
the</p>
<p>I was able to interact with the toy in</p>
<p>the browser as soon as the chain had</p>
<p>been upgraded I actually in the
console</p>
<p>got like an object that that let me do</p>
<p>it in like that was specific to them
the</p>
<p>code that I'd literally just written
in</p>
<p>rusty now I that wasn't a trick I
didn't</p>
<p>have anything up my sleeves it was it</p>
<p>was literally that cool what happened</p>
<p>was the runtime got upgraded although
I</p>
<p>didn't code any new JavaScript stuff</p>
<p>what the the code that I wrote and</p>
<p>annoyingly I can't really I don't have</p>
<p>know let me see if I can find that
code</p>
<p>should be in substrate node template
and</p>
<p>if I remember correctly I might even</p>
<p>have to I do okay so so if we go back
to</p>
<p>the substrate node template so this is</p>
<p>this is the sort of demo node that I</p>
<p>that I forked and started coding and I</p>
<p>have this demo module and if you</p>
<p>remember I did something like this I</p>
<p>said I did post sender and then
decoded</p>
<p>this this little address and then also</p>
<p>for the call</p>
<p>it's calls demo dot set payment and
that</p>
<p>just worked despite me not actually</p>
<p>having changed anything in the</p>
<p>JavaScript</p>
<p>I didn't even reload the page I think
I</p>
<p>certainly shouldn't have had to what</p>
<p>happened was when I coded this module</p>
<p>with play and set payment and when I</p>
<p>coded this storage with the two
entries</p>
<p>here payment and pot part of this
macro</p>
<p>generates some metadata about what
these</p>
<p>functions are and what these storage</p>
<p>items are and this includes the types</p>
<p>this metadata is compiled into a sort
of</p>
<p>blob and then amalgamated with all the</p>
<p>other metadata from all the other</p>
<p>modules by virtue of this macro here</p>
<p>construct runtime that you might have</p>
<p>remembered I put the demo line in this</p>
<p>then gets passed to through this macro</p>
<p>which implements the api's into as a</p>
<p>something that can be called into from</p>
<p>the client so we have here one
specific</p>
<p>trait that we can implement called</p>
<p>metadata as a metadata trait if we</p>
<p>implement it it means that metadata
RPC</p>
<p>will work and what it will do is it
will</p>
<p>check to make sure it's actually</p>
<p>implemented call into it which means</p>
<p>dispatching into the newly compiled</p>
<p>runtime that's been compiled into</p>
<p>webassembly</p>
<p>and interpreting this metadata and all</p>
<p>this this this function does is it
grabs</p>
<p>the metadata from the runtime and that</p>
<p>was caught that was built from this</p>
<p>constructor and time and that was
built</p>
<p>from all of the individual modules
which</p>
<p>are each are built from their</p>
<p>declarations of what they're stripped</p>
<p>their storage are and what their what</p>
<p>their module is that in terms of their</p>
<p>function entry points and this gets</p>
<p>passed into the JavaScript and as part</p>
<p>of the substrate JavaScript libraries
we</p>
<p>have a couple of libraries that you
can</p>
<p>choose to use one is based on</p>
<p>observables one is based on the bomb's</p>
<p>framework that I did last year and
these</p>
<p>libraries will in interpret this</p>
<p>metadata blob and turn into real</p>
<p>JavaScript utility objects that
reflect</p>
<p>and</p>
<p>[Music]</p>
<p>and will dispatch to and utilize all
of</p>
<p>the all of the module specific stuff
so</p>
<p>if we go to the way they put it</p>
<p>no just live demo yeah so if we go to</p>
<p>demo then it will actually interpret</p>
<p>will basically make Marshall all the</p>
<p>arguments and dispatch it through the</p>
<p>transaction dispatch system into yeah</p>
<p>and similarly if we query what the pot</p>
<p>is it will work out where this runtime</p>
<p>given this this module stores the pot
in</p>
<p>its storage and then go into storage
and</p>
<p>check that using these storage are PCs</p>
<p>and if you part of bonds is the fact</p>
<p>that it's reactive so if you tie that</p>
<p>into a reactive component if you</p>
<p>remember at the end of the demo I very</p>
<p>quickly did a little label that that</p>
<p>tracked the pot going up and down what</p>
<p>it's doing there is it's setting up a</p>
<p>pub sub with the thing that it figured</p>
<p>out all on its own with the storage</p>
<p>location for pot and track the value
it</p>
<p>knew what the type was because it
looked</p>
<p>that to see that this pot type is T</p>
<p>balanced and decoded it into a
balanced</p>
<p>type and then put that into a label</p>
<p>formatted it correctly and put it on
the</p>
<p>screen and it did all of that without
me</p>
<p>really having to do anything other
than</p>
<p>implement it right here in rust so the</p>
<p>idea with this is to make it not just</p>
<p>painless but actually fun to code</p>
<p>modules and the U is four modules what</p>
<p>was one of the other that was another</p>
<p>question mempool yes this is an</p>
<p>interesting one so we rewrote the
meant</p>
<p>well</p>
<p>Tomek I should say rewrote the mempool</p>
<p>recently we call it the transaction
pool</p>
<p>same thing</p>
<p>we wanted something that was general
but</p>
<p>also easy to use and it took a little</p>
<p>bit of thought but what we came up
with</p>
<p>was a a pool that basically allows</p>
<p>runtimes to specify dependency graphs</p>
<p>arbitrary dependency graphs of</p>
<p>transactions easily we wanted
something</p>
<p>that would work equally well between
UT</p>
<p>EXO model and a account and index
model</p>
<p>so basically a transaction pool that
was</p>
<p>equally viable to be used for
something</p>
<p>like Bitcoin and aetherium with the
idea</p>
<p>being that if we made something
general</p>
<p>enough for both of them it would</p>
<p>probably be pretty general
sufficiently</p>
<p>at least for doing interesting other</p>
<p>chains in the future so the way it</p>
<p>basically works is the runtime gets</p>
<p>queried and I can show you where this</p>
<p>comes in the runtime gets queried</p>
<p>through this validate transaction as</p>
<p>part of a transaction Q trait so this
is</p>
<p>a trait that you have to implement in</p>
<p>order for this transaction queue to
work</p>
<p>transaction pool actually just</p>
<p>references the executive here so the</p>
<p>executive is like a sort of
overarching</p>
<p>SRM L module that looks after just</p>
<p>executing a block in general in</p>
<p>particular it runs through each of the</p>
<p>extrinsic and dispatches them off into</p>
<p>the module that is expecting to that
the</p>
<p>extrinsic is sort of trying to call
into</p>
<p>all extrinsic in the SRM L framework</p>
<p>have a they they may or may not have a</p>
<p>sender they may or may not have a</p>
<p>signature they may or may not have an</p>
<p>index they may or may not have an
error</p>
<p>we actually allow we actually force or</p>
<p>not force we actually facilitate</p>
<p>extrinsic soar transactions to limit
the</p>
<p>number of blocks that they're valid
for</p>
<p>inherit</p>
<p>right so you can make an extrinsic the</p>
<p>transaction I should say that is valid</p>
<p>for the 16 blocks between a thousand
and</p>
<p>twenty four and a thousand and forty</p>
<p>right and it after a block a thousand</p>
<p>and forty it's just no longer valid it</p>
<p>can never possibly be make its way
into</p>
<p>a block chain this is needed for a
bunch</p>
<p>of other things particularly for
having</p>
<p>dust collection which I can go into</p>
<p>after after I've talked about this if</p>
<p>that's of interesting the transaction</p>
<p>the way that the validate transaction</p>
<p>thing works the important thing I want</p>
<p>to show you is the inputs and the
output</p>
<p>so the inputs are the transaction fair</p>
<p>enough</p>
<p>the outputs are the trend is this</p>
<p>transaction validity object let's see
if</p>
<p>I can find where this is defined this
is</p>
<p>basically a means of we see so we can</p>
<p>see it's got like three potential
states</p>
<p>invalid valid or unknown l invalid oh
no</p>
<p>no and a pretty obvious what they mean</p>
<p>valid so for a valid transaction we
have</p>
<p>a bunch of we have four sort of fields</p>
<p>that we have to define priority so how</p>
<p>what's this transactions priority</p>
<p>amongst peers for which everything
else</p>
<p>is the same</p>
<p>right so assuming this that everything</p>
<p>else is is all other things being
equal</p>
<p>which one should we favor to put into
a</p>
<p>block for in aetherium style chain
this</p>
<p>would basically be what's the gas
price</p>
<p>if the gas price is higher then we
just</p>
<p>favorite more we also have requires
and</p>
<p>provide so requires is and we have
this</p>
<p>vector of transaction tags transaction</p>
<p>tags are just Veck vu8 so in rust lack</p>
<p>of UI it's basically just an arbitrary</p>
<p>bunch of bytes right it's just a by
the</p>
<p>string yeah</p>
<p>and these tanks they're therefore</p>
<p>entirely up to the it's entirely up to</p>
<p>the runtime how it what tags it uses
it</p>
<p>can tag them by hashes it could
tighten</p>
<p>them by integers it really doesn't</p>
<p>matter could tag it by account IDs it</p>
<p>could you know concatenate a bunch of</p>
<p>these things and that could be the tag</p>
<p>they're entirely arbitrary all that a</p>
<p>transaction list transaction validity</p>
<p>function has to state is what does it</p>
<p>what tags does it require and what
tanks</p>
<p>does it provide now we can imagine for
a</p>
<p>for an aetherium style chain it would</p>
<p>require the tags that requires are all</p>
<p>of the tags actually let's start with</p>
<p>the tax that it provides tags that</p>
<p>provides our one tag that's formed by</p>
<p>the concatenation of the account ID
the</p>
<p>sender ID and the current index the</p>
<p>index of the transaction right the
nonce</p>
<p>yeah so you pop those two together</p>
<p>that's your tag right that's just an</p>
<p>identifier for the the thing that this</p>
<p>transaction provides what it allows us</p>
<p>to do is to then state what other</p>
<p>transactions require in those terms so</p>
<p>suppose you have a my transaction is</p>
<p>sent from me my account dev and it's
got</p>
<p>an index of 10 right so for that to
work</p>
<p>in the etherium model there has to be
a</p>
<p>sent by me one with index 0 1 with
index</p>
<p>yeah and that would make 10 to be the</p>
<p>next valid transaction so what it</p>
<p>requires is all of those tags now
that's</p>
<p>a bit unwieldy for when we get into
the</p>
<p>thousands of or tens of thousands of</p>
<p>transactions coming from a single</p>
<p>account so what we say is only
requires</p>
<p>the tags that have not yet made their</p>
<p>way onto the chain yeah and if if we
get</p>
<p>into the silly numbers like hundreds</p>
<p>then we just say either unknown or</p>
<p>invalid and we just say look this this</p>
<p>transaction is just way ahead of</p>
<p>schedule send it back sometime</p>
<p>future and that that actually is more
or</p>
<p>less the way that the etherium the the</p>
<p>parity etherium transaction queue sort</p>
<p>of worked just not in these terms now
if</p>
<p>you're on a UT EXO chain then it's</p>
<p>actually quite a bit easier because a
UT</p>
<p>EXO model like basically you've got
what</p>
<p>the tags are they're tags are just</p>
<p>transaction output hashes yeah so your</p>
<p>tags are it requires these unspent</p>
<p>transactions or unspent transaction</p>
<p>outputs so those transactions that are</p>
<p>providing those outputs are
specifically</p>
<p>the things that are required and it</p>
<p>provides well it provides its own hash</p>
<p>its transaction hash so you can very</p>
<p>quickly build a very easily build a</p>
<p>dependency graph from aut EXO chain
that</p>
<p>fits the Maps quite fairly well on to</p>
<p>this and we also have a longevity so</p>
<p>longevity is basically it's valid now</p>
<p>but for how many blocks will it
continue</p>
<p>to be valid in the future 4-bit Connor</p>
<p>and aetherium that's infinity
basically</p>
<p>transactions don't become invalid just</p>
<p>because time has passed but for for
our</p>
<p>substrate chains we have this notion
as</p>
<p>I said before of errors and the
ability</p>
<p>to inherently make a make a an
extrinsic</p>
<p>or a transaction in they're inherently</p>
<p>invalid merely after the passing of
time</p>
<p>specifically blocks and that's what
this</p>
<p>sort of lets the transaction so yeah</p>
<p>that's pretty much how transactions
work</p>
<p>in substrate this is more for the SR
ml</p>
<p>it is meant to be general so in theory</p>
<p>it can be used perfectly easily from
the</p>
<p>core from if you want to build like
your</p>
<p>own from scratch substrate chain in</p>
<p>principle this can be used fine but</p>
<p>you're also free</p>
<p>to write your own like there's there's</p>
<p>nothing you can you can plug in your
own</p>
<p>cue if you want to write your own cue
if</p>
<p>you have something that this model
can't</p>
<p>can't manage to embed the nice thing</p>
<p>about this though is that it goes to
the</p>
<p>runtime for all of its rules which
means</p>
<p>if you want to update your transaction</p>
<p>formats and you want to introduce all</p>
<p>sorts of new and crazy interesting
stuff</p>
<p>as long as you can put it in terms of</p>
<p>priority requires provides and
longevity</p>
<p>then you can implement whatever it is</p>
<p>that you want and when you upgrade the</p>
<p>chain all of the full nodes all of the</p>
<p>authoring nodes will all automatically</p>
<p>use your new transaction semantics and</p>
<p>they'll the transaction queues will</p>
<p>function accordingly yep</p>
<p>the only you can't modify so can you</p>
<p>modify a transaction in the that's in</p>
<p>the queue so what you can do is you
can</p>
<p>if a transaction has made its way into</p>
<p>the queue because it said hey it's
valid</p>
<p>and you want another transaction to be</p>
<p>able to to beat that one to it you
know</p>
<p>if the to a mutually one can you can</p>
<p>make it mutually exclusive by by
simply</p>
<p>giving it the same tag but higher</p>
<p>priority that will that will get the</p>
<p>transaction kids are sort of boot it
out</p>
<p>the transaction queue only feeds</p>
<p>transactions into the block if you
just</p>
<p>want a transaction to just become</p>
<p>invalid before it's been finalized or</p>
<p>before it's been before it makes its
way</p>
<p>into a block you can do that just as</p>
<p>easily by having a sort of you know if</p>
<p>in the execute block function if one
of</p>
<p>the transactions is this transaction</p>
<p>then invalid block right and what will</p>
<p>happen is the the unlucky guy who's</p>
<p>using this transaction queue to to
make</p>
<p>a block will will find that adding
this</p>
<p>transaction makes their block invalid</p>
<p>and</p>
<p>and it's kind of bad form to do it
that</p>
<p>way you should try and like make it as</p>
<p>much of a part of the queue as
possible</p>
<p>but if for whatever reason you can't
do</p>
<p>that then yeah you can make it invalid</p>
<p>just by virtue of changing the runtime
I</p>
<p>get in the office</p>
<p>Tomic can probably offer a little bit</p>
<p>more insight into this basically</p>
<p>priority is the is the first thing
that</p>
<p>it will select on and beyond that so
for</p>
<p>the transactions that have not yet</p>
<p>become valid then basically it's just</p>
<p>randomly choose randomly discarding</p>
<p>one's not that random is is
particularly</p>
<p>great but it also minimizes any</p>
<p>potential issues regarding censorship
so</p>
<p>if you've got like tons of nodes on
the</p>
<p>network and you really try to prevent</p>
<p>some particular transaction from
getting</p>
<p>through and you're doing that just by</p>
<p>spamming transaction out onto the</p>
<p>transactions out onto the network we</p>
<p>minimize the the worst case by by</p>
<p>choosing transactions at random to</p>
<p>discard because it's likely that</p>
<p>eventually one node will eventually
will</p>
<p>mine that that that transaction that</p>
<p>ultimately if lots and lots of people</p>
<p>want to transact at the same time then</p>
<p>there will be congestion so it's it's</p>
<p>really just the case of randomly</p>
<p>choosing transactions that come
through</p>
<p>I mean in principle priority here is</p>
<p>that's precisely what priority is for</p>
<p>times of congestion the runtime can</p>
<p>basically state which transactions</p>
<p>should be favored above which others
but</p>
<p>if if priority isn't enough or for</p>
<p>whatever reason maybe everyone's got
the</p>
<p>same gas price I don't know whatever
or</p>
<p>you don't introduce any particularly</p>
<p>compelling priority prioritization</p>
<p>mechanism then random is is the best
we</p>
<p>can do</p>
<p>cool Oh what was the what was the
thing</p>
<p>after transaction</p>
<p>I've forgotten no is there something</p>
<p>else to discuss yep okay anything
before</p>
<p>smart contracts yeah ah yeah okay yeah
I</p>
<p>can go into that so so the runtime</p>
<p>encodes a lot a lot about what what
the</p>
<p>blockchain does how it works</p>
<p>it doesn't encode everything in the</p>
<p>substrate model because we don't want</p>
<p>some things to be to be special what
we</p>
<p>could do is literally just put a rest</p>
<p>executable on the chain and when that</p>
<p>changes you have to kind of download
the</p>
<p>new one and run it but we don't like</p>
<p>that there are I think I may well need</p>
<p>to be corrected here but I think there</p>
<p>are there is a certain other project</p>
<p>that's trying to do governance and</p>
<p>upgrade ability and that's more or
less</p>
<p>the model that it takes so it sort of</p>
<p>basically puts its executable on the</p>
<p>chain and it's up to the nodes to kind</p>
<p>of download the new executable and run</p>
<p>that I don't like that model I prefer
to</p>
<p>be a little bit more conservative
about</p>
<p>the specific component that can be</p>
<p>upgraded and when we accept that part
of</p>
<p>the logic doesn't sit on chain for</p>
<p>example the peer-to-peer networking</p>
<p>library I don't think it's sensible to</p>
<p>put that logic on the chain and
there's</p>
<p>even questions about putting consensus</p>
<p>logic on the chain it could be that if</p>
<p>consensus logic is on the chain then
you</p>
<p>have this kind of monoculture almost</p>
<p>monocultural strategy for the
consensus</p>
<p>and that may lead to</p>
<p>attack vectors by virtue of knowing
that</p>
<p>all of the nodes use the same strategy</p>
<p>so if we're happy with not putting all</p>
<p>of our logic onto the chain then the</p>
<p>question is given that we need to have</p>
<p>the same data structures ostensibly on</p>
<p>the chain like in the runtime that's</p>
<p>upgradeable and off the chain in the</p>
<p>sort of general node itself how do we</p>
<p>how do we manage the fact that
sometimes</p>
<p>those structures will be those data</p>
<p>structures like transactions for
example</p>
<p>could be changed over the course of a</p>
<p>chains life how do we how do we like</p>
<p>manage the fact that these
transactions</p>
<p>have to then be sent they have to be</p>
<p>stored in a transaction queue and they</p>
<p>have to be sent over the network there</p>
<p>have there has to be some way of</p>
<p>handling these things right so we need</p>
<p>some sort of object and that's where</p>
<p>these opaque objects come in we need
to</p>
<p>a block needs to have some</p>
<p>characteristics and there has to be
some</p>
<p>object that we can call a block but we</p>
<p>don't need to go into the specific</p>
<p>meaning of a block beyond basic the</p>
<p>basic semantics of here's how to read
a</p>
<p>block number here's how to read the</p>
<p>parent hash and these these very basic</p>
<p>types or what we call the opaque types</p>
<p>and they are the fundamental types of
a</p>
<p>block chain that don't change from</p>
<p>Genesis onwards the in principle
they're</p>
<p>basically fixed now you say oh well
hold</p>
<p>on the extrinsic format is fixed and
the</p>
<p>block format is fixed and you know
then</p>
<p>surely you can't upgrade and it's like</p>
<p>well actually it that's the reason
that</p>
<p>they are opaque is because most of the</p>
<p>data that they contain is not stored
in</p>
<p>terms of specific fields like the the</p>
<p>real meaning</p>
<p>but rather it's just a blob a generic</p>
<p>blob and it's only the bits of the
data</p>
<p>that we actually need to know for</p>
<p>example we need to know the length of</p>
<p>the transaction yep the extrinsic we
you</p>
<p>know because if we're going to send it</p>
<p>around we need to how long it is and
so</p>
<p>what we do is we if we're going to</p>
<p>concatenate it together into a block</p>
<p>then we need to know how long each</p>
<p>particular piece of the concatenation
is</p>
<p>so we we say write the one bit of a</p>
<p>transaction of an extrinsic
transactions</p>
<p>format is going to be the length at
the</p>
<p>prefixed length but everything beyond</p>
<p>that we're going to leave undefined as</p>
<p>to its meaning we're just going to
tell</p>
<p>you how to decode and encode it you</p>
<p>decode it by reading the length and
then</p>
<p>reading that many other bytes I'm not</p>
<p>going to tell you what those bytes
mean</p>
<p>but that's how you decoded it and you</p>
<p>encode it by seeing how long it is and</p>
<p>then putting the length at the
beginning</p>
<p>and then following up with the other</p>
<p>things by avoiding defining this stuff</p>
<p>we can then define it in the runtime
and</p>
<p>then as runtimes upgrade we're not
left</p>
<p>with incompatible data structures that</p>
<p>for handling these things in the
client</p>
<p>now it's important that so this isn't</p>
<p>something that we do with every type</p>
<p>it's just the fundamental cut types
that</p>
<p>clients do tend to have to be able to</p>
<p>handle basically because we need to
pass</p>
<p>these types around the network or</p>
<p>because we have to interpret them for</p>
<p>the consensus algorithm so block
headers</p>
<p>one type extrinsic</p>
<p>one of the type and I think hashes may</p>
<p>be although hashes are paint data
anyway</p>
<p>I think it's basically just those two</p>
<p>types yeah yeah although again</p>
<p>signatures are opaque data anyway</p>
<p>specific so you've got two types of</p>
<p>signatures that float around in</p>
<p>substrate you have to consent there
are</p>
<p>signatures on the consensus side and</p>
<p>signatures on the signed on the</p>
<p>transaction side so signatures on the</p>
<p>transaction side they don't need to be</p>
<p>the same and the runtime entirely</p>
<p>interprets those I can well imagine</p>
<p>extra</p>
<p>substrate chains that don't have any</p>
<p>signing any cryptographic signing on</p>
<p>them at all that they're they're just</p>
<p>you know the validators choose which</p>
<p>things come along they you know from</p>
<p>maybe some trusted corporate
centralized</p>
<p>database and they're just funneling
this</p>
<p>data in and it's going into the chain</p>
<p>and just being recorded and maybe</p>
<p>there's some state transitions that</p>
<p>happen on the chain but basically it's</p>
<p>that that's there's no need for</p>
<p>signatures the consensus side yes
there</p>
<p>are signatures but I guess the
consensus</p>
<p>algorithm to define their own</p>
<p>cryptography anyway I mentioned what</p>
<p>sorry yeah so I I kind of spent a
while</p>
<p>describing that but I mean I can I
guess</p>
<p>I can probably if I can launch a node
do</p>
<p>I have one already oh yeah sure</p>
<p>okay so yeah I have a node running
okay</p>
<p>so this is I think the demo node I'm</p>
<p>gonna upgrade it okay so</p>
<p>yeah okay so is that too small I guess</p>
<p>that's way too small right how do i is</p>
<p>that still too small it's too big okay</p>
<p>so this is template node V - which I</p>
<p>think means the demo is in but I can I</p>
<p>can check this by so I mentioned there</p>
<p>was the run time object fun time okay
so</p>
<p>the run time has a bunch of these are</p>
<p>the various modules in the run time</p>
<p>right so balances consensus core demo</p>
<p>that's the one I just coded earlier</p>
<p>today system timestamp upgrade key and</p>
<p>version these as I mentioned come from</p>
<p>the metadata so I can I can show you
the</p>
<p>code I mean it's it's I don't know how</p>
<p>interesting is if we go into the</p>
<p>double-oh-seven</p>
<p>if we go into the double-oh-seven</p>
<p>library and then the double-oh-seven</p>
<p>substrate and then the bonds this is</p>
<p>where they get created let me see if I</p>
<p>can make this a bit bigger okay</p>
<p>can you read that just about</p>
<p>yeah I need a I need the drum player</p>
<p>okay so these are these are the sort
of</p>
<p>easy ones that just they're just sort
of</p>
<p>hard-coded height header head fash
name</p>
<p>version and chain I mean you saw the
RPC</p>
<p>end of these we have this node service</p>
<p>that just ensures there's a single</p>
<p>WebSockets connection to the node so</p>
<p>it's like a singleton and then we can
I</p>
<p>assure a request and these these are</p>
<p>these are single shot requests some of</p>
<p>these like head there subscriptions so</p>
<p>there they use the pub sub
functionality</p>
<p>we have runtime version so I can eat I</p>
<p>can I can give you a lighter quick and</p>
<p>runtime I think it was in the core and</p>
<p>then console log and that's what comes</p>
<p>back very simple got the api's this
this</p>
<p>exactly represents this structure in</p>
<p>rust that is in runtime template yeah
so</p>
<p>this this represents exactly this</p>
<p>structure if I change this structure
and</p>
<p>upgrade the upgrade the chain then
this</p>
<p>will automatically update if I run
this</p>
<p>this thing again it will it will give
me</p>
<p>the new values yeah and it's the meta</p>
<p>it's actually it's not the metadata
that</p>
<p>encodes that I think but that is that
is</p>
<p>fetched in this from the runtime in
the</p>
<p>same way that the metadata is fetched
so</p>
<p>the meta metadata is built
automatically</p>
<p>per module in the runtime amalgamated</p>
<p>together by virtue of a couple of
macros</p>
<p>and then pass the line into the</p>
<p>JavaScript and in the JavaScript we
have</p>
<p>a so we actually have a serialization</p>
<p>library very very lightweight
basically</p>
<p>just memory representation
serialization</p>
<p>library and we have the opposite in</p>
<p>JavaScript so we can serialize and</p>
<p>deserialize in rest and we have the
same</p>
<p>thing in JavaScript and we can kind of
a</p>
<p>bit like a bit like JSON or whatever</p>
<p>except binary and sort of designed to
be</p>
<p>very fast and very minimal lightweight</p>
<p>yeah that's yeah the you mean these</p>
<p>modules yeah so these are indeed there</p>
<p>is a web pack running somewhere yeah</p>
<p>yeah</p>
<p>so got like MPM sitting around in the</p>
<p>background updating are checking for</p>
<p>changes and packing it all together ok</p>
<p>so there's there's two things going on</p>
<p>so the first is the these module these</p>
<p>UI components those you have to code</p>
<p>independently so they don't come from</p>
<p>rust they're not automatically made
you</p>
<p>actually if you want to add a new a
new</p>
<p>module you have to sort of get get
yeah</p>
<p>typing fingers out and and and go into</p>
<p>wherever it was that I went into now</p>
<p>here we go yeah where is it now here
so</p>
<p>this is the yeah this is the UI and
this</p>
<p>isn't special at all this is just</p>
<p>standard reacts semantic UI with web</p>
<p>pack and NPM packing things in there</p>
<p>looking out and watching it and
packing</p>
<p>it in the background so there's
nothing</p>
<p>I don't I don't so if I if I add any</p>
<p>module then I have to press controller</p>
<p>yeah but what happens I didn't press</p>
<p>control I just now to get sorry if I
do</p>
<p>a blockchain upgrade I don't I don't</p>
<p>have to press ctrl R now because the</p>
<p>metadata automatically gets updated in</p>
<p>the background so that doesn't come
from</p>
<p>the thing I was mentioning earlier
with</p>
<p>the hard-coded things so the bonds
these</p>
<p>bonds here the version bond and the
the</p>
<p>name chain the hi header hash these
are</p>
<p>all hard-coded they don't change their</p>
<p>fundamental are PCs that substrate</p>
<p>provides but the other things the
things</p>
<p>like if I go to run time and like I</p>
<p>don't know balances if I want to get
the</p>
<p>balance of an account or accounts do I</p>
<p>have let's decode an account let's</p>
<p>decode this account so I want to get
the</p>
<p>balance of this guy then I can decode</p>
<p>that into an account ID and give it to</p>
<p>balance and then print the output and</p>
<p>it's going to tell me that this guy</p>
<p>doesn't have any money I think yeah</p>
<p>balanced zero and then if I if I gave</p>
<p>this guy some money so let's send some</p>
<p>funds to him or her it's a hex address</p>
<p>I'm not sure if they have gender do I</p>
<p>have any Alice has got some I guess</p>
<p>Alice is a girl and I'm going to send
I</p>
<p>don't know if I send a thousand units</p>
<p>that's going through sent and then if
I</p>
<p>go back to balance is then we go now</p>
<p>it's got a thousand yeah so this stuff</p>
<p>when we go into specific run time</p>
<p>modules they're not built they're not</p>
<p>they don't come in by virtue of this</p>
<p>code this code builds them</p>
<p>programmatically from the metadata</p>
<p>is has a pub/sub relationship with the</p>
<p>with the node itself so as the nodes</p>
<p>runtime gets upgraded this finds out</p>
<p>about the upgrade grabs the metadata
and</p>
<p>rebuilds all of those objects and data</p>
<p>structures and letters now interact
with</p>
<p>with the new runtime in a organic</p>
<p>fashion but if we want to add UI</p>
<p>components then we have to go in and
do</p>
<p>them ourselves and press controller
the</p>
<p>real a chain what what does it use</p>
<p>so polka-dot uses power to codec</p>
<p>polka-dot uses basically all of</p>
<p>substrate like there's not much in</p>
<p>substrate smart contracts is the only</p>
<p>thing it doesn't use and yeah other
than</p>
<p>that it looks pretty similar to our</p>
<p>basic substrate node so it's got all
of</p>
<p>the sort of functionality in apart
from</p>
<p>a smart contract but it does have an</p>
<p>extra module that's specific to polka</p>
<p>dot called</p>
<p>para chains module so I haven't I'm
not</p>
<p>like it's been a little while since I</p>
<p>looked at the para Chains module but</p>
<p>that's something that will become
pretty</p>
<p>important</p>
<p>over the next POC so PRC 3 was
dedicated</p>
<p>mainly to our new consensus algorithm</p>
<p>that would be the final our algorithm</p>
<p>for polka dot shaft</p>
<p>or grandpa I don't know you know I
mean</p>
<p>I do know obviously shaft but some</p>
<p>people don't not everyone agrees yeah</p>
<p>sure so shaft is a actually is al here</p>
<p>so al al invented shaft at the time it</p>
<p>was called afge Al's finality gadget
but</p>
<p>we're kind of renaming it and
basically</p>
<p>it's a progressive adaptive
progressive</p>
<p>finality consensus algorithm designed</p>
<p>specifically for polkadots use case
and</p>
<p>the idea is that it's a it adapts to</p>
<p>network situations and validator</p>
<p>pluralities if you have lots of</p>
<p>validators sorry if you have few</p>
<p>validators and a really good network</p>
<p>then shaft will finalize as quickly as</p>
<p>instant an instant finality algorithm</p>
<p>like tender mint or rhododendron which</p>
<p>is our sort of take on pbft for the</p>
<p>blockchain but even if you have slower</p>
<p>Network and lots of validators it will</p>
<p>finalize as fast as it can behind the</p>
<p>scenes and the way it does that is by</p>
<p>having a transitive relationship over</p>
<p>the blocks so the way that pbft
derived</p>
<p>algorithms work in general is you have
a</p>
<p>candidate block so every every block</p>
<p>number that you want to finalize every</p>
<p>block that you want to finalize there
is</p>
<p>a candidate right it's not yet
finalized</p>
<p>so it's just one of many and then you</p>
<p>put it to a bunch of vault authorities</p>
<p>or validators that the participants in</p>
<p>this consensus game and they will each</p>
<p>if it's a pbft based thing they'll do
a</p>
<p>a pre commit</p>
<p>to basically say this is the one that
we</p>
<p>think should win and then if they see</p>
<p>enough other pre-commit they'll
they'll</p>
<p>move on to a commit and there were
rules</p>
<p>about how you whether you can change</p>
<p>from a pre given that you've pre</p>
<p>committed on one thing whether you can</p>
<p>change your you know what what you're</p>
<p>allowed to commit to and if you've</p>
<p>committed on one thing whether you're</p>
<p>allowed to switch that commitment and</p>
<p>these rules basically guarantee that</p>
<p>assuming no more than two thirds plus</p>
<p>one Byzantine nodes or Byzantine</p>
<p>participants in the game that you will</p>
<p>always come to an agreement on what it</p>
<p>is that on a particular candidate now</p>
<p>this is fine it's a perfectly
reasonable</p>
<p>way to go but the problem is that
block</p>
<p>it's not optimal because block chains</p>
<p>have relationships blocks have</p>
<p>relationships between each of them so</p>
<p>blocks that are all of the same number</p>
<p>so they're all at the same level
they're</p>
<p>just can different candidates for the</p>
<p>same potential slot don't have much of
a</p>
<p>relationship beyond being mutually</p>
<p>exclusive but blocks that appear
before</p>
<p>so parents or ancestor blocks have a</p>
<p>very very strong relationship right</p>
<p>cryptographic relationship we store</p>
<p>their hash which means as an
implication</p>
<p>that if you voted for block I don't
know</p>
<p>that that 68 references by virtue of
its</p>
<p>parent hash you're you've also voted
for</p>
<p>that right you've also voted for 66
or</p>
<p>Genesis block assuming that the
network</p>
<p>conditions are such that you are not</p>
<p>going to be able to afford to finalize</p>
<p>every block then a vote for 68 should</p>
<p>definitely imply a vote for 64 67 and
so</p>
<p>forth but for that 67 yep so if
there's</p>
<p>two folks if there's a fork and what</p>
<p>it's made its way to block deep</p>
<p>okay maybe asn't made yeah actually
you</p>
<p>could have in principle have made it's</p>
<p>way too much deep just at the
production</p>
<p>stage then it's important that any
vote</p>
<p>not allowed to do under this
transitive</p>
<p>model is both commit to 68 on one fork</p>
<p>and to the 67 on the other fork and
that</p>
<p>that's one of the things that now</p>
<p>becomes illegal but because that's</p>
<p>illegal it what it means is that we
can</p>
<p>interpret a vote for 68 as a vote for</p>
<p>all of the blocks that haven't yet
been</p>
<p>finalized on that on that fork and if</p>
<p>suppose we suppose where that last the</p>
<p>most recently finalized block is</p>
<p>terrible network conditions the most</p>
<p>recent recent finalized block is like</p>
<p>say block 50 yeah so we're running 18</p>
<p>blocks in advance of the of the most</p>
<p>recent sort of had agreed on head of
the</p>
<p>chain then if we've seen let's suppose</p>
<p>we have 10 validators and they're</p>
<p>basically just validate they're just</p>
<p>voting for the blocks that they see we</p>
<p>can only get out one vote per block
and</p>
<p>it's our vote so actually that's not</p>
<p>I've got 20 validators and we can only</p>
<p>get out one vote per block what would</p>
<p>happen is that under Undershaft these</p>
<p>votes we would always be running at
the</p>
<p>actually no because we only need &#8532;
so</p>
<p>it'd be the 13<sup>th</sup> or 14<sup>th</sup> most recent</p>
<p>vote vote because we can accept all of</p>
<p>the votes that are that are were on</p>
<p>blocks after let's say where were 50
so</p>
<p>suppose we're trying to finalize like
I</p>
<p>don't know 53 yeah all of the votes on</p>
<p>that fork after 53 so every validator
is</p>
<p>like doing one vote per block so one
of</p>
<p>them is voted on 54 one of them is
voted</p>
<p>on 55 one</p>
<p>voted on 56 all the way up to 67 or 68</p>
<p>where every were then it's likely that</p>
<p>every new block &#8532; plus 1 will have</p>
<p>voted on one more than the last block
in</p>
<p>total access account ensures</p>
<p>every new block that's being produced</p>
<p>that validator will be voting on that</p>
<p>new block which will imply they voted
on</p>
<p>all of the blocks up until that new</p>
<p>block which will imply you've got one</p>
<p>more vote assuming a constant cycling
of</p>
<p>validators one more vote on that chain</p>
<p>in general and so because that chains</p>
<p>been brought forward by a block
because</p>
<p>everyone's voting on that chain then
the</p>
<p>the the the most recent block to be</p>
<p>finalized will probably be a bit
further</p>
<p>along as a network conditions improve
we</p>
<p>can get invalidated can get more</p>
<p>messages out then that will catch up</p>
<p>naturally because the greater number
of</p>
<p>votes will be recent and and therefore</p>
<p>again transitive relationships being</p>
<p>what they are you'll be able to</p>
<p>basically form a consensus that two</p>
<p>thirds plus one validators agree that
in</p>
<p>fact 62 is the most recent shared
block</p>
<p>that they can all finalize it's a pain</p>
<p>to spot when a validator has behaved</p>
<p>badly basically because the rules are</p>
<p>transitive sorry yeah rules are</p>
<p>transitive and so you have to enter
into</p>
<p>this in the worst case enter into this</p>
<p>game of querying well hold on you you
as</p>
<p>a validator voted for this block on
this</p>
<p>chain but yet you voted for that block</p>
<p>on that chain why what were you seeing</p>
<p>what what signatures did you see that</p>
<p>made you switch chains and they can</p>
<p>either equivocate and say move don't</p>
<p>know because they actually they switch</p>
<p>chains in</p>
<p>invalidly or they can provide you with</p>
<p>the signatures in which case you have
to</p>
<p>go to the next guy along and say well</p>
<p>you signed for this chain but you you</p>
<p>know and the game continues basically</p>
<p>it's quite a an unwieldy game and it's
a</p>
<p>it's a bit of a pain it's a bit
tedious</p>
<p>to play but it's it's something that
can</p>
<p>happen on chain and it's not the end
of</p>
<p>the world beyond that it's it's got
some</p>
<p>very nice proofs about how live it
stays</p>
<p>in an asynchronous environment and its</p>
<p>optimal over the it uses the notion of</p>
<p>block transitivity optimally in</p>
<p>determining under a pbft style
mechanism</p>
<p>which is the most recent lock that it</p>
<p>can be considered final okay</p>
<p>under optimal Network conditions</p>
<p>assuming the validators are well</p>
<p>connected with each other and that
their</p>
<p>plurality because I mean it's pbft so</p>
<p>you can't get around this N squared</p>
<p>message passing stuff requirements but</p>
<p>assuming that they're well connected
and</p>
<p>and there aren't too many of them then</p>
<p>you know I don't I mean you know this
is</p>
<p>where empirical measurements come in
but</p>
<p>certainly with our test net so far</p>
<p>there's no reason to think that we
can't</p>
<p>handle</p>
<p>final final is finalizing most blocks
so</p>
<p>not staying very far behind the block</p>
<p>production head at all so the block</p>
<p>production is handled by a separate</p>
<p>consensus mechanism that doesn't
provide</p>
<p>finality at the moment we're moving</p>
<p>towards or and which is a randomized</p>
<p>shuffled version of hora which
basically</p>
<p>just sounds for Authority round and
you</p>
<p>just go around a bunch of round-robin</p>
<p>style block production game but it's
our</p>
<p>intention eventually to move to
probably</p>
<p>something similar to a ruborous which
is</p>
<p>a it's basically like proof of
authority</p>
<p>mapped on a proof-of-work mapped onto
a</p>
<p>proof of authority schema so all
thority</p>
<p>get given lucky slots whereby they can</p>
<p>mine a block and and it's a way of</p>
<p>generating generating these lucky
slots</p>
<p>and and I'm ministering them in such a</p>
<p>way that that you get given a bunch of</p>
<p>guarantees about Byzantine tolerance</p>
<p>so Network network topology or</p>
<p>peer-to-peer networking in general
we're</p>
<p>using lib p2p which is pretty modular
I</p>
<p>would in principle there's nothing
that</p>
<p>would stop you from writing a new
module</p>
<p>that would provide the sort of</p>
<p>networking that yeah I mean if you
want</p>
<p>something like Onion Routing on like</p>
<p>mixed nuts yeah I don't see why that</p>
<p>wouldn't be possible using the
existing</p>
<p>network module system worst case it's</p>
<p>probably like implementing it as a as
a</p>
<p>new API but that's something we'd look</p>
<p>into now I think I think it's what you</p>
<p>can can build on top of it I mean we'd</p>
<p>certainly be interested to sort of</p>
<p>explore if the API is a sufficient in</p>
<p>order to provide that but I suspect
they</p>
<p>might be okay more questions when how</p>
<p>long it was at 8 p.m. do we want to</p>
<p>maybe you think yeah yeah I it will be
a</p>
<p>little bit harsh but yeah I think ok</p>
<p>let's let's erm maybe move the
questions</p>
<p>towards the end and do a I don't know</p>
<p>some exciting stuff do you want to
plug</p>
<p>in the HDMI oh yeah I'm glad that
you're</p>
<p>doing this cuz I need to go to toilet</p>
<p>yeah yeah sure thing use do we do we</p>
<p>have working toilets yeah yeah</p>
<p>outside so gay oh cool</p>
<p>so let's get started this demo is like</p>
<p>well it wasn't prepared at all because</p>
<p>of his ins and I and I had to
improvise</p>
<p>so yeah um yeah let's get started so</p>
<p>because I basically don't have any UI</p>
<p>because of as I mentioned reasons I
have</p>
<p>to do like I have to craft in
extrinsic</p>
<p>by hand</p>
<p>basically yeah but I have some little</p>
<p>code snippets that actually can help
me</p>
<p>with that so it's not that problematic</p>
<p>is it okay yeah</p>
<p>okay so let's start this let's start</p>
<p>with a fresh chain for that that make</p>
<p>that maybe might take some time</p>
<p>yep yep it's basically the branch a</p>
<p>second I know I would say now because</p>
<p>yeah for some reason I chose to use
the</p>
<p>soft shoe type oh yeah so let's clear</p>
<p>the DB and then let's launch this new</p>
<p>chain yeah so it seems to be working
and</p>
<p>yeah so so to make an extrinsic we
need</p>
<p>some to do some boilerplate code and
for</p>
<p>that we need a genetics hash so like
it</p>
<p>it is required to create extreme six</p>
<p>that that can be executed on this</p>
<p>particular change so we need to first</p>
<p>fetch the block hash of the Ganesha's</p>
<p>and for that I will I'm going to use</p>
<p>the RPC cash so I will call block hash</p>
<p>function this argument zero which
which</p>
<p>is for Genesis block and so oh yeah</p>
<p>actually it's already there yeah and</p>
<p>after that I will regenerate all
extreme</p>
<p>six so yeah so this extrinsic this big</p>
<p>blob of up our data is contains</p>
<p>instructions to deploy a certain</p>
<p>contract and the the most of this data</p>
<p>actually represents webassembly smart</p>
<p>contract and yeah let's let's actually</p>
<p>submit that extrinsic up have this one</p>
<p>but it doesn't yeah oh yeah</p>
<p>yep so to verify that it actually</p>
<p>executed well let's see the substrate
UI</p>
<p>oh do you have an idea how to look up
or</p>
<p>a nonce of Ellis yeah yeah yeah</p>
<p>as I said network I can connect to you</p>
<p>ah yeah it's def okay yeah in
JavaScript</p>
<p>oh sorry sorry guys I can't stop I
come</p>
<p>on okay so the runtime and then
balances</p>
<p>is where the hold on it's not system
by</p>
<p>the index is stored and then I can't</p>
<p>nonce and then which I can't ah</p>
<p>Ellis Oh Alice and we should get
Alice's</p>
<p>so we need to introduce a the seed for</p>
<p>Alice which is a pain to do if you
don't</p>
<p>do you have some key I yep and try to</p>
<p>just execute it in here yeah</p>
<p>it's okay yeah it just works</p>
<p>oh but is it the latest version of</p>
<p>something it's from air each hour but</p>
<p>I'm not sure yes later</p>
<p>yeah does work cool totally I expect</p>
<p>okay</p>
<p>oh how can I help you I want to get</p>
<p>these Safari oh okay</p>
<p>right so we put that scene in there
you</p>
<p>put it yeah so while this has this
yeah</p>
<p>now this is a short oh yeah this is</p>
<p>something that should go over actually</p>
<p>because this is kind of cool but I'll
do</p>
<p>it afterwards so we can try that</p>
<p>everyone can see what's happened there</p>
<p>right okay</p>
<p>Oh doesn't suffice all that well</p>
<p>I wouldn't be surprised actually okay</p>
<p>[Music]</p>
<p>maybe it's not about ten part I mean</p>
<p>maybe yeah nons account okay</p>
<p>maybe should open fire</p>
<p>let's just check decode and then
Alice's</p>
<p>ID okay so that's done something that</p>
<p>wasn't a type error but it's so that</p>
<p>means that our transaction actually
got</p>
<p>in and we deployed the test contract
so</p>
<p>now I'm gonna show what kind of
contract</p>
<p>this is yeah so so this contract is</p>
<p>basic counter which has actually two</p>
<p>functions to action that we can
actually</p>
<p>execute on it let me do ya so the
first</p>
<p>one is in command that takes you 32</p>
<p>parameter which specifies by the value</p>
<p>by which we should document this
counter</p>
<p>and get function which basically
returns</p>
<p>the value and when the contract is</p>
<p>executed we just read input data it's</p>
<p>basically the same as in Hulme and</p>
<p>decode it into this action</p>
<p>in a very enumeration and then
depending</p>
<p>on what actual variant of this you
know</p>
<p>we performing the action and this in</p>
<p>case of increment we just query the</p>
<p>contract storage by certain key which
is</p>
<p>the specified value and then save it</p>
<p>back into the storage encoding it and</p>
<p>before that and get is basically just
we</p>
<p>read the storage and return that value</p>
<p>and that's it yeah</p>
<p>so this contract is already on on the</p>
<p>this chain and yeah so there is a</p>
<p>extrinsic that which with which we can</p>
<p>call this specific contract and it
takes</p>
<p>address of that contract and address
is</p>
<p>calculated by the constructor code of</p>
<p>this contract and the original address</p>
<p>which sent this which sent the create</p>
<p>extrinsic and this so again yeah</p>
<p>actually it's used and so it's
specified</p>
<p>right here so for the first
transaction</p>
<p>it was zero extrinsic and for the
second</p>
<p>one it's one yeah okay I see what you</p>
<p>mean for determining contract address</p>
<p>nonce is not used only code of</p>
<p>constructor a region and just like</p>
<p>input data and that's it yeah yeah</p>
<p>basically yes but you can alleviate it</p>
<p>with providing different data so we
push</p>
<p>this issue to user side yeah</p>
<p>and yes so we doing call this to the</p>
<p>contract at the specified address this</p>
<p>we thinking some funds to it and also</p>
<p>specifying how much gas we want to</p>
<p>allocate to that and also we're</p>
<p>providing the input data for the</p>
<p>contract and this data is actually
just</p>
<p>encoding the index of the action so in</p>
<p>in our case it's 0 so it corresponds
to</p>
<p>this variant and these four bytes</p>
<p>encodes basically number by which we</p>
<p>increment yeah</p>
<p>and let's let's execute this yeah for</p>
<p>now it's the only way but like we</p>
<p>basically don't have either cell right</p>
<p>now and it's the thing that is</p>
<p>developing right now yeah so yes</p>
<p>and so these extreme six extrinsic is</p>
<p>for calling this contract</p>
<p>yep so I think it is executed and to</p>
<p>verify that it's actually performing
the</p>
<p>the task let's just check the
substrate</p>
<p>storage for for this corresponding</p>
<p>storage key of that contract and I
have</p>
<p>because it's kind of hard to my to
know</p>
<p>which address is that I have a special</p>
<p>function that actually calculates this</p>
<p>for me and yeah and let's take it and</p>
<p>[Music]</p>
<p>it's really yeah so okay here's the</p>
<p>result</p>
<p>and it's corresponds to one in encoded</p>
<p>in little endian format and this is a</p>
<p>specific thing for encoding the length</p>
<p>of this data so yeah it basically
worked</p>
<p>and then let's try to increment it
once</p>
<p>again by I don't know</p>
<p>yeah wait a second I don't understand</p>
<p>that</p>
<p>so this extrinsic is in memory pool
and</p>
<p>let's wait until it actually yep it's</p>
<p>mind and then let's query the storage</p>
<p>and yeah it looks like it's eight yeah</p>
<p>sure yeah that's a good question let
me</p>
<p>show you know so basically it's more</p>
<p>more like a few Mike environment and
so</p>
<p>for now we basically have bare minimum</p>
<p>for writing contracts and it's I get</p>
<p>said storage and then call create
which</p>
<p>basically is very similar to thin ones</p>
<p>return checking input size and also
like</p>
<p>this it also have has a scratch buffer</p>
<p>and it's something that is not in
Hulme</p>
<p>so because of yeah I didn't mention
that</p>
<p>that storage in</p>
<p>substrate contracts have like
arbitrary</p>
<p>size at values so you can put not
only</p>
<p>you query it you you can basically</p>
<p>return it in this user specified area</p>
<p>I mean contracts it's fight area of</p>
<p>memory but then like it's like if the</p>
<p>contract doesn't track track the size
of</p>
<p>the values that it actually puts in in</p>
<p>this in storage then it could easily</p>
<p>overwrite the like memory of the</p>
<p>contract and this can be a bad thing
so</p>
<p>because of this we all arbitrary size</p>
<p>that values are put into scratch
buffer</p>
<p>and then contract can actually query</p>
<p>this buffer to actually load data from</p>
<p>it yeah so it depends actually so you</p>
<p>can't use I know anything that depends</p>
<p>on files trading and things like that</p>
<p>but like everything that doesn't
require</p>
<p>my saturating system things like files</p>
<p>and things like that and can be
compile</p>
<p>it to the assembly and then probably</p>
<p>fine</p>
<p>yeah so basically this system is very</p>
<p>similar to a theme and we basically
have</p>
<p>like a smattering very similar to a</p>
<p>theme I mean like every year Vice</p>
<p>Minister action is metrid and like I</p>
<p>mean every instruction in the block
just</p>
<p>Metford as the price of the dairy
prices</p>
<p>are similar up and just deducted from</p>
<p>some counter and if it goes to the
zero</p>
<p>then there's out of gas succession
yeah</p>
<p>so we are planning on bringing in</p>
<p>chromatic gas yeah yeah and also they</p>
<p>think I wanted to mention that we
about</p>
<p>the API that we are also thinking
about</p>
<p>giving the contractor on time</p>
<p>chance to call different modules
outside</p>
<p>of I mean inside the run time so it
can</p>
<p>actually call do Kevin and well yeah
so</p>
<p>means governance modules even the
power</p>
<p>chain module that would forward any</p>
<p>potentially could could have open an</p>
<p>entry point a function call to forward</p>
<p>messages into a para train so we can</p>
<p>imagine is a smart contract sitting on</p>
<p>one pair of chain sending out messages</p>
<p>to a smart contract on another pair of</p>
<p>chain or sending messages into a</p>
<p>governance system so a smart contract</p>
<p>chain like the edgeware chain that was</p>
<p>mentioned today could have smart</p>
<p>contracts that you know manage
people's</p>
<p>voting preferences yeah that's
something</p>
<p>I mean yeah for the gas it differs a</p>
<p>little from aetherium one of the
things</p>
<p>that I wanted to bring into a theorem</p>
<p>like when it was too late to bring it
in</p>
<p>was this notion of chromatic gas which</p>
<p>is basically having three different</p>
<p>kinds of gas one of them for
processing</p>
<p>one of them for memory usage and one
for</p>
<p>storage with the idea being that</p>
<p>basically we can compute maximum gas
per</p>
<p>block in terms of resource usage for</p>
<p>each of these three but doesn't make</p>
<p>sense that if someone gives up some</p>
<p>processing power that they can instead</p>
<p>bloat the chain by some storage right</p>
<p>then the two are not the two are not</p>
<p>somehow mutually exclusive so what we
do</p>
<p>is we actually have the resource usage</p>
<p>independently for each three and then</p>
<p>every contract gets basically whenever</p>
<p>you spend one gas on processing you
sort</p>
<p>of get one gas on the other two for
free</p>
<p>or vice versa</p>
<p>the gas sort of comes in in in white</p>
<p>light where you get all of the</p>
<p>independent gases sort of tied
together</p>
<p>and then you can use them as you as
you</p>
<p>want and what you don't use either
irem</p>
<p>really decided but it either gets sort</p>
<p>of ignored or goes back into the pot
so</p>
<p>that other things can in principle</p>
<p>overspend but what this does it</p>
<p>basically means you've got much better</p>
<p>resource usage utilization and you
don't</p>
<p>have the issue whereby you can bloat
the</p>
<p>chain by 3x what you should be able to</p>
<p>just by using all of your gas to enter</p>
<p>into storage and none of your gas or</p>
<p>memory or processing which is what the</p>
<p>sort of scenario we're stuck with</p>
<p>aetherium oh why not GPU as well well</p>
<p>maybe version 2</p>
<p>yeah we'll go into the contracts right</p>
<p>so yeah this so for like the gas
system</p>
<p>is only a concern of contract model
and</p>
<p>any other modules doesn't know about
it</p>
<p>at all yeah I think so</p>
<p>then cool so I'll mention one other</p>
<p>thing which is the account indexing</p>
<p>which is what we saw earlier do you
want</p>
<p>to know I can do it on yours I think I</p>
<p>mean yes but it's it's a nice little</p>
<p>thing so it's worth it's worth knowing</p>
<p>it well can you how do I get to Safari</p>
<p>okay so if you noticed before while I</p>
<p>was mucking around down here can I
make</p>
<p>this bigger somehow you can do this</p>
<p>little trick oh just so there is a if</p>
<p>you hold ctrl you can scroll it like</p>
<p>that yeah so if you notice up up here</p>
<p>Alice has a so I we've got two
accounts</p>
<p>here default and Alice default is this</p>
<p>big long big long address analysis
this</p>
<p>lovely little address right so this is
a</p>
<p>legit these are both legit addresses
and</p>
<p>if you you know in principle if if a</p>
<p>substrate chain gets listed on an</p>
<p>exchange then in principle you can get</p>
<p>one of these addresses this is just an</p>
<p>address like in Bitcoin in etherium</p>
<p>right but they both are so Alice this</p>
<p>isn't some cunning name registry or</p>
<p>something this is an address we</p>
<p>understand yeah we're going with this</p>
<p>[Music]</p>
<p>in principle yeah it will mean
different</p>
<p>things on different chains because it</p>
<p>will reference a different account
just</p>
<p>this just as the other one the long
one</p>
<p>would so the long one is a they're
both</p>
<p>based 58 representations they both got
a</p>
<p>checksum in them they both got a
version</p>
<p>byte in them the difference is that
the</p>
<p>first one is a 32 byte public key from</p>
<p>that represents a point on the edy 255
1</p>
<p>nine public key and the other one is
an</p>
<p>index and that's why it can be so
short</p>
<p>so every account in in a if you use
the</p>
<p>SRM L in substrate every account has a</p>
<p>an index associated with it I should
say</p>
<p>every nonzero balance account writes</p>
<p>every account that's active has an
index</p>
<p>associated with it if an account
doesn't</p>
<p>have doesn't have any balance then it</p>
<p>doesn't get one of these nice short
IDs</p>
<p>because there's no index I so it can't</p>
<p>like then you marry every account then</p>
<p>you may as well just use the 32 byte</p>
<p>identifier but if it's got something
in</p>
<p>it then you can use this use this
index</p>
<p>instead to identify it and we've got a</p>
<p>mechanism whereby if it's within the</p>
<p>first 200 or so then you get to just
use</p>
<p>one byte and if it's in the next sixty</p>
<p>or thousand then you get to use the
next</p>
<p>byte they're two bytes and I think</p>
<p>there's only like tens of thousands of</p>
<p>active accounts on of active accounts</p>
<p>that have any real significant funds
in</p>
<p>on like aetherium so i don't i suspect</p>
<p>on substrate chains we'll probably see</p>
<p>most addresses to be fewer basically
be</p>
<p>like four six five or six characters
and</p>
<p>it basically can look that up in its</p>
<p>enumeration of all addresses and and
as</p>
<p>these things become free so if an</p>
<p>account goes to zero substrates SRM
our</p>
<p>balances module will automatically
claim</p>
<p>reclaim that that address right so it</p>
<p>basically deletes everything to do
with</p>
<p>it</p>
<p>and this including this enumeration
and</p>
<p>so if someone like has one of the</p>
<p>earlier Guinea I can't imagine that</p>
<p>there's gonna be something like clamor</p>
<p>to get the first to enjoy the accounts</p>
<p>that have you know these four four</p>
<p>letter addresses cause like there's
only</p>
<p>so many of them and before long
they'll</p>
<p>go but if someone like reduces their</p>
<p>balance disease or to the minimum
below</p>
<p>the minimum allowed balance there's
this</p>
<p>notion of an existential deposit which</p>
<p>is basically the minimum amount of</p>
<p>balance you must have for your account</p>
<p>not just to be deleted dying like that</p>
<p>if they're iam Bitcoin don't really
have</p>
<p>this which leads to an awful lot of
dust</p>
<p>accounts that have like a none spend</p>
<p>ibly small amount of of ether in it so</p>
<p>small that you know you can't actually</p>
<p>send the transaction to but yet
they're</p>
<p>still recorded by the state so they're</p>
<p>still taking up a lot of space on disk</p>
<p>exchanges are particularly bad for
these</p>
<p>things but you know they they leave a</p>
<p>bit of gas on the spent and that just</p>
<p>that's just a tiny little bit of ether</p>
<p>just clogging up the train chain to
the</p>
<p>like 10,000 accounts a day sort of job</p>
<p>so this is why in principle yes so if</p>
<p>this account becomes a discount like</p>
<p>reduces below the existential deposit</p>
<p>and then someone else claims it then</p>
<p>that address won't last forever so</p>
<p>there's couple of ways of dealing with</p>
<p>that the first is that that address
has</p>
<p>in it a checksum and that checksum</p>
<p>refers to not that address itself but
to</p>
<p>the account that that address points
to</p>
<p>so if they were to if they were to do
it</p>
<p>maliciously it wouldn't happen</p>
<p>accidentally the checksum would look</p>
<p>after that they were to do it</p>
<p>maliciously they'd have to mine an</p>
<p>address that whose checksum was the
same</p>
<p>and these accounts these small ones
you</p>
<p>can choose which address you want to
use</p>
<p>yes sorry you can choose which address</p>
<p>format you want to use and some of the</p>
<p>address formats have like eight byte</p>
<p>checksums so they'd have to mine an</p>
<p>address that had like eight whole byte</p>
<p>that shared an eight byte</p>
<p>start of a hash with with the address</p>
<p>that sort with the address that's IO</p>
<p>that's that so I mean I can see this
not</p>
<p>being so so much of an issue and to be</p>
<p>honest if you want if you want an</p>
<p>address that's like you know permanent</p>
<p>then sure just use the big big long
one</p>
<p>yeah</p>
<p>but if if you want something that's
like</p>
<p>a payment address or if you absolutely</p>
<p>sure that you're never going to go
below</p>
<p>the minimum amount then as these small</p>
<p>addresses should be fine and they're a</p>
<p>lot easier to remember and the other</p>
<p>notable other point is that if we
delete</p>
<p>accounts and this came up in aetherium</p>
<p>so parity we apparently made a
proposal</p>
<p>on the IPS to sort of say look we
should</p>
<p>have disk election that was actually</p>
<p>implemented on covin right we rolled
it</p>
<p>out to covin and the issue one of the</p>
<p>issues is that it means that nan</p>
<p>basically transactions can be replayed</p>
<p>if you're not careful because when you</p>
<p>delete an address you don't just
delete</p>
<p>the balance and reduce that zero but
you</p>
<p>also delete the nonce which is
counting</p>
<p>how many transactions it's sent which</p>
<p>means the first transactions can now
be</p>
<p>replayed or the very first transaction</p>
<p>in particular can be replayed and then</p>
<p>the second third and fourth can if
that</p>
<p>goes through successfully and that's</p>
<p>problematic or it could be problematic</p>
<p>because if those transactions do</p>
<p>something other than spending the</p>
<p>balance then you can actually put</p>
<p>balance into the now zero account so</p>
<p>it's now got cash to spend</p>
<p>and then replay those transactions to
do</p>
<p>this to replay the side effects this
is</p>
<p>why we brought in the transaction
errors</p>
<p>so the idea is that when you construct
a</p>
<p>transaction it's only valid for a</p>
<p>particular period for the future so
you</p>
<p>can make a trend you can construct a</p>
<p>transaction that's valid indefinitely
we</p>
<p>allow for that but if you do that
you've</p>
<p>got to accept the fact that if someone</p>
<p>else if your account gets deleted then</p>
<p>the first transactions can be replayed</p>
<p>primarily because there may be well</p>
<p>firstly cause we you know we're</p>
<p>generalists and we like to you know</p>
<p>allow for as much as possible and it's</p>
<p>up to our users who we we believe our</p>
<p>our esteemed you know we esteem them
in</p>
<p>terms of their intelligence and we</p>
<p>believe that they know what they're</p>
<p>doing I mean you know everything goes</p>
<p>wrong at some point I I don't believe
in</p>
<p>making tools you know I don't believe
in</p>
<p>making kind of safety scissors for you</p>
<p>know for people I think that you know</p>
<p>the level at least that were at you
know</p>
<p>we should we should be working with</p>
<p>sharp knives for sure official and but
I</p>
<p>would put this on the user level so I</p>
<p>think this is for you know if you read</p>
<p>some of the other chains they issue
kind</p>
<p>of not warnings but directives to
their</p>
<p>middleware and use a user level like
UI</p>
<p>engineers say look this you can cut</p>
<p>yourself the chain doesn't protect
users</p>
<p>from doing the stupid thing so it's up</p>
<p>to you to protect them by putting in</p>
<p>these warnings and we will do the same</p>
<p>so for example if you're if you've</p>
<p>issued if your wallet knows you've</p>
<p>issued transaction resolve doesn't
know</p>
<p>that you haven't issued IRRI limited</p>
<p>transactions and sees that a
transaction</p>
<p>you're about to issue would remove
your</p>
<p>account with the would delete it would</p>
<p>take you below the minimum amount then</p>
<p>it will would basically bring up this</p>
<p>big what it would either not let you
do</p>
<p>it or bring up a big warning saying
are</p>
<p>you sure you know what you're doing
yeah</p>
<p>yeah so if you know we don't want to</p>
<p>like hamstring people at developing on</p>
<p>the platform we want to inform them
and</p>
<p>we want to inform them when they
should</p>
<p>hamstring the people who were using</p>
<p>their what they're developing or at</p>
<p>least give them information to make
sure</p>
<p>that they don't shoot themselves in
the</p>
<p>foot</p>
<p>yeah it's true I mean there's maybe a</p>
<p>trade-off to be made here checksum</p>
<p>seemed a perfectly reasonable thing I</p>
<p>mean most address formats have checked</p>
<p>sums in the original aetherium didn't</p>
<p>and that was a really big pain so that</p>
<p>was that was just less and learnt in</p>
<p>this case I don't think there has been
a</p>
<p>lesson yet to be learnt and I think
it's</p>
<p>such a really easy thing to protect</p>
<p>against like either wallets shouldn't</p>
<p>let you construct transactions without</p>
<p>errors that should be a niche thing
that</p>
<p>you have to build your own
applications</p>
<p>to do I mean the cambia that I can</p>
<p>imagine applications where errors
don't</p>
<p>fit for example suppose you've got</p>
<p>something like a plasma plasma kind of</p>
<p>chain and or a state a state channel
and</p>
<p>you need this transaction to
potentially</p>
<p>last indefinitely</p>
<p>because that's the only guarantee that</p>
<p>the other side has that you won't just</p>
<p>pull out after the era is ended yeah</p>
<p>it's like there's no other way of
doing</p>
<p>it and there you just have to ensure</p>
<p>that for your specific niche use case</p>
<p>there is no way of reducing that
balance</p>
<p>below the existential deposit but in</p>
<p>most use cases user level tools can
make</p>
<p>sure that you don't shoot yourself in</p>
<p>the foot say again</p>
<p>oh when you see well it's a
transaction</p>
<p>hold on so when you serialize a</p>
<p>transaction I see what you mean yes
can</p>
<p>we carry yes the answer is yes we can</p>
<p>carry our concise address format into</p>
<p>transactions as well so normally we</p>
<p>would have to put a 32 by identifier
for</p>
<p>each address for the sender and the</p>
<p>receiver irritatingly so one of the</p>
<p>things that if you read about Edie two</p>
<p>four five one nine they'll be like oh</p>
<p>yeah it's really good it's got like</p>
<p>compact signatures its signatures are</p>
<p>smaller there are only 64 bytes
instead</p>
<p>of 65 what they don't tell you is that</p>
<p>unlike unlike ECDSA you do need to put</p>
<p>the sender address in there so yes you</p>
<p>might you might shave a bite off in</p>
<p>terms of the signature but you have to</p>
<p>add an extra 32 bytes on because you</p>
<p>have to tell it who the sender is</p>
<p>I mean Bitcoin doesn't kind of Bitcoin</p>
<p>provides both but you know whatever</p>
<p>that was just a questionable decision
if</p>
<p>there him doesn't we go we don't
bother</p>
<p>encoding the sender in the transaction</p>
<p>because we derive it directly from the</p>
<p>signature you can't do that with EDD
si</p>
<p>sorry with Edie 2 5 1 9</p>
<p>so actually signatures are 96 bytes</p>
<p>we have a binary format so we don't
have</p>
<p>padding we have a binary format that</p>
<p>basically uses 33 bytes to encode one</p>
<p>other 32 byte addresses and uses one</p>
<p>byte to encode the small ones and and
so</p>
<p>forth and you can determine what it is</p>
<p>from the first few bits yeah so it did</p>
<p>if you use these small addresses you</p>
<p>shave off like 60 bytes potentially a</p>
<p>couple more from the transactions and</p>
<p>that's that's a pretty decent saving
it</p>
<p>basically cuts transactions by &#8534; as</p>
<p>the relay train yeah I mean so the</p>
<p>substrate comes from the relay chain
so</p>
<p>when we started coding polka dot well</p>
<p>when we started coding substrate what</p>
<p>has become substrate that was just</p>
<p>called polka dot and although even</p>
<p>before we started I had in my mind it</p>
<p>was going to turn into substrate I</p>
<p>didn't really mention that to the
other</p>
<p>devs so they were a little surprised</p>
<p>when I started renaming stuff but yeah</p>
<p>it's the biggest the biggest challenge</p>
<p>is kind of thing that I mentioned it's</p>
<p>getting that level of generalism while</p>
<p>still making things be easy too</p>
<p>while still making it easy to write
the</p>
<p>things that you want to be able to
write</p>
<p>so that that's what you know any
design</p>
<p>of language or API comes down to this</p>
<p>getting this trade-off right and it</p>
<p>ultimately comes down to expressivity</p>
<p>so expressivity of a of a language in
a</p>
<p>domain is really just how well you can</p>
<p>make it easy to do the things that you</p>
<p>want to do and make it possible to do</p>
<p>everything</p>
<p>yeah and bringing those two closer</p>
<p>together is is what we call
expressivity</p>
<p>or what we call a good language or a</p>
<p>good a good domain language</p>
<p>and you know substrate has a similar</p>
<p>challenge getting it getting it
general</p>
<p>is not so easy</p>
<p>it's something I've you know kind of</p>
<p>wanted to do even since CPP aetherium</p>
<p>but not having had all of the
experience</p>
<p>it wasn't so easy to do it the early</p>
<p>days but it gets it gets a bit easier</p>
<p>with having coded a couple more Sega
is</p>
<p>data deleted when it's deleted</p>
<p>okay so what was the question again</p>
<p>okay so specifically with smart</p>
<p>contracts or with runtime modules and</p>
<p>and the the substrate in general not</p>
<p>really but smart contracts kind of
have</p>
<p>to do their own thing to some degree
but</p>
<p>okay I'll talk about substrate in</p>
<p>general because that's what I can
answer</p>
<p>yes I see I know what you mean now I</p>
<p>know what you mean yes no contracts
work</p>
<p>differently</p>
<p>okay so we have we have archive mode</p>
<p>that keeps everything around forever
it</p>
<p>doesn't run an archive mode by by you
by</p>
<p>by default it runs in a standard
pruning</p>
<p>mode by default which basically Clips</p>
<p>any state from blocks that are old</p>
<p>enough after a 100 or 200 or so if
what</p>
<p>you're talking about is like in a
theory</p>
<p>and when a contract delete something
if</p>
<p>that contract if that call into that</p>
<p>contract turns out to be exceptional
and</p>
<p>everything gets rolled back then that</p>
<p>delete doesn't happen in substrate in</p>
<p>the basic runtime module in the basic</p>
<p>sort of core we don't do roll backs</p>
<p>right so as soon as something gets</p>
<p>written into storage or deleted from</p>
<p>storage it's actually deleted and
unless</p>
<p>the entire block gets rolled back</p>
<p>because it panics then it's done that</p>
<p>thing's deleted and there's no way you</p>
<p>can you don't have checkpointing in</p>
<p>there if you want checkpointing which</p>
<p>you may well want it goes into the it</p>
<p>goes into the as a runtime module</p>
<p>library and the contract runtime
module</p>
<p>library that the smart contract
actually</p>
<p>implements checkpointing so it's it</p>
<p>implements something that is basically
a</p>
<p>minimal form of aetherium but has most</p>
<p>of the stuff of the etherium
environment</p>
<p>and the only difference is that it</p>
<p>doesn't run in a VM it runs in</p>
<p>webassembly</p>
<p>of course web assemblies kind of cool</p>
<p>and sexy unfashionable and hipster</p>
<p>yeah I mean you know to some degree</p>
<p>runtime upgrades and these sort of</p>
<p>out-of-band</p>
<p>state changes are are specifically
what</p>
<p>we do how we manage what happens when</p>
<p>things go south in other ways so</p>
<p>ultimately there's the same safeguard
if</p>
<p>you want to call it that that any
other</p>
<p>chain would have that doesn't have a</p>
<p>governance system which is it can
always</p>
<p>be hard forked even if the governess</p>
<p>system of the polka dot substrate</p>
<p>whatever goes Ori I I sort of take a</p>
<p>two-prong approach and say well on the</p>
<p>one hand we want to be reasonably</p>
<p>conservative and try to get solid</p>
<p>reviews of our proposed governance</p>
<p>mechanism and/or use governance</p>
<p>mechanisms that already exist in real</p>
<p>life and that we have some idea will</p>
<p>probably work okay with the other
prong</p>
<p>being try it out as much as possible
on</p>
<p>test nets that actually have value</p>
<p>before we put it on to a network that</p>
<p>has lots of value potentially and this</p>
<p>is you know where the edgeware project</p>
<p>could be very helpful and potentially</p>
<p>others like it to really provide a</p>
<p>network where you know no one's losing</p>
<p>anything if it's if it there's no cost</p>
<p>to it going down or being problematic
or</p>
<p>having to suffer a reversion but there</p>
<p>is real value at stake</p>
<p>because it's got tokens that are worth</p>
<p>something</p>
<p>and that's that I think is a really
nice</p>
<p>middle ground to sort of go and try a</p>
<p>bunch of stuff that we think probably</p>
<p>works okay but we can't be sure to</p>
<p>really try you know empirical testing</p>
<p>try it in real life in much the same
way</p>
<p>that when the psychologists want to
run</p>
<p>a new experiment you know they they
get</p>
<p>a bit of money and they sort of say
look</p>
<p>if you if you do this right you get</p>
<p>fifty quid and you know this is the</p>
<p>instructions offer you go kind of the</p>
<p>same thing and we did something
similar</p>
<p>with the Olympic test net back in PRC</p>
<p>nine PRC ten days for the theorem to
try</p>
<p>and get people to kick the tires of
what</p>
<p>would become the the main net before
we</p>
<p>released I actually I think Olympic
was</p>
<p>a not a failure but I don't think it
was</p>
<p>a great success not that many people</p>
<p>took part in it and it didn't really
it</p>
<p>didn't discover it didn't uncover one
or</p>
<p>two of the books that came up which
you</p>
<p>know we would have otherwise hoped and
I</p>
<p>think a test net that has real value</p>
<p>maybe less value than it would
otherwise</p>
<p>have but still real value is probably
a</p>
<p>much more market-oriented and
therefore</p>
<p>probably more successful way of of</p>
<p>trying to incentivize people to to
break</p>
<p>it or otherwise test it</p>
<p>yeah so I mean you know</p>
<p>etherium had the consensus tests it
had</p>
<p>a decent first testing although I will</p>
<p>note that when we implemented parity
we</p>
<p>found two points where the consensus</p>
<p>test didn't cover and we had to we had</p>
<p>to add new consensus test it's a hard</p>
<p>thing to do with with substrate we
kind</p>
<p>of work around it a little bit by
saying</p>
<p>there's a single was a reference on</p>
<p>chain so it's basically like a machine</p>
<p>executable reference spec I think it's</p>
<p>it's questionable whether that's such
a</p>
<p>great thing I mean the Bitcoin guys
love</p>
<p>that idea because it's like they've
got</p>
<p>their reference implementation Bitcoin</p>
<p>core I kind of like the yellow paper
for</p>
<p>not being machine executable but yeah
I</p>
<p>mean in polka dot and substrates case
it</p>
<p>was largely forced upon us anyway</p>
<p>in principle there could be multiple</p>
<p>implementations at the same runtime I</p>
<p>could you know that's something that I</p>
<p>explicitly provide for in the
versioning</p>
<p>I'm not sure if it will happen the</p>
<p>foundation the web sorry foundation is</p>
<p>looking to fine teams that yeah cool</p>
<p>okay yeah so I mean I'd like to see it</p>
<p>happen but as for whether as for
whether</p>
<p>we could really come out come up with</p>
<p>better consensus tests than what we
have</p>
<p>for theorem I'm not sure it's a really</p>
<p>tough thing to do without literally</p>
<p>paying someone to painstakingly go</p>
<p>through the specification every single</p>
<p>conditional write a test for and I
mean</p>
<p>this gets potential exponentially</p>
<p>complex as the different modules I
mean</p>
<p>you're looking at kind of two to the</p>
<p>number of conditions potential number
of</p>
<p>tests that would have to cover</p>
<p>everything it's it's crazy so I would</p>
<p>probably just go for</p>
<p>taking out a month's rental of a</p>
<p>supercomputer and running a huge
amount</p>
<p>of first test I think with a with a</p>
<p>well-designed for sir that that should</p>
<p>probably provide as much protection as</p>
<p>as you would otherwise get in polkadot</p>
<p>so there's there is a mechanism sperm</p>
<p>free transactions basically for</p>
<p>transactions under the substrate model</p>
<p>which polkadot adheres to transactions</p>
<p>must sorry under the substrate the SR
ml</p>
<p>model which polka dot adheres to I</p>
<p>should say transactions must pay for</p>
<p>their space on the chain so there's a</p>
<p>fixed fee for a transaction and
there's</p>
<p>always I mean can set it to zero if
you</p>
<p>want but you know in principle there's
a</p>
<p>fixed fee that a chain can leverage
and</p>
<p>this is a something that can be
changed</p>
<p>and upgraded and all the rest of its
if</p>
<p>it's the parameter and there's also a</p>
<p>per byte fee that's charged per byte
of</p>
<p>the transaction and as it's encoded on</p>
<p>the chain so that's non negligible</p>
<p>that's sorry that's non-negotiable
they</p>
<p>have to be paid beyond that there is
an</p>
<p>if you want to charge additional fees</p>
<p>for what the transaction is doing then</p>
<p>that's up to the chain and the runtime</p>
<p>modules and the sort of the the code</p>
<p>that you're writing yourself you can</p>
<p>charge for what you want polka dot
will</p>
<p>probably have some yeah fees
associated</p>
<p>with the creation of balances with the</p>
<p>occasion of accounts so the balances</p>
<p>module has a fee schedule that you can</p>
<p>again customize if you've depending on</p>
<p>you know how much you want to charge
for</p>
<p>the sorts of things of creating new</p>
<p>accounts reaping all the counts</p>
<p>transferring balances as a bunch of</p>
<p>things that you can</p>
<p>customize what else other modules I</p>
<p>think most modules actually don't</p>
<p>specify much of a much of a fee
schedule</p>
<p>because most of the modules are yeah</p>
<p>there are the governance modules do
have</p>
<p>a fairly complex system of deposits</p>
<p>that's mainly to address sort of a
game</p>
<p>theoretic concern of a potential</p>
<p>quadratic quadratic attacks where</p>
<p>quadratic cost attacks where certain</p>
<p>algorithms are order N squared to rent</p>
<p>or order MN to run and you have to
make</p>
<p>sure that you know m and n can't both</p>
<p>get too big it's ok if one of them
gets</p>
<p>kind of big but you need to make sure</p>
<p>that they can't both get too big</p>
<p>otherwise you end up sort of going off</p>
<p>off into the distance in terms of the</p>
<p>cost and that's managed through as I
say</p>
<p>a set of deposits and basically</p>
<p>incrementally increasing the cost of
one</p>
<p>or the other depending on how big the</p>
<p>other one is I think that's probably</p>
<p>about it I'm not so worried about</p>
<p>literally charging every single clock
of</p>
<p>processing like gas would do partly</p>
<p>because a lot of a lot of operations
are</p>
<p>order one and/or they have like a</p>
<p>reasonable maximum that is not that
you</p>
<p>know they don't really go proportional</p>
<p>the user can't force or the trans
actor</p>
<p>can't force a anything over a
particular</p>
<p>maximum that maximum is relatively and</p>
<p>significant and I would look upon it</p>
<p>more or less as the Bitcoin chain does</p>
<p>where it's fine</p>
<p>basically to just charge for space on</p>
<p>the chain for the size of the</p>
<p>transaction and not think too much
about</p>
<p>the processing costs because they will</p>
<p>be dwarfed by the storage costs</p>
<p>obviously in smart contract land it's</p>
<p>much more important to charge for the</p>
<p>for everything because you know users</p>
<p>can potentially write infinite loops
and</p>
<p>all the rest of it so their contracts</p>
<p>module does indeed make sure that</p>
<p>there's a proper costing mechanism for</p>
<p>them</p>
<p>it's not a final design decision to be</p>
<p>honest but part of the reason is that
it</p>
<p>makes a lot of sense when block</p>
<p>production is on a individual basis
like</p>
<ul>
<li>so - are competing with each other
to</li>
</ul>
<p>produce these blocks it's not really
the</p>
<p>case in the consensus are mechanisms
or</p>
<p>block production mechanisms that I see</p>
<p>substrate working under you in in</p>
<p>substrates case that's really more of
a</p>
<p>sort of collective thing and it
doesn't</p>
<p>really make sense to reward one over</p>
<p>another and partly it's I guess
remember</p>
<p>the other reason I think there was</p>
<p>so in some sense when you burn fees
it's</p>
<p>a little like paying all of the other</p>
<p>participants I guess yeah okay so the</p>
<p>reason that that miners collected fees</p>
<p>in etherium was because that's what
they</p>
<p>did in Bitcoin and the reason that -</p>
<p>collected fees in Bitcoin was because</p>
<p>eventually the block reward was going
to</p>
<p>go down to zero and that would be the</p>
<p>only thing that incentivized - to do</p>
<p>anything that's not the case in in</p>
<p>polka-dot in poker ah the the
validators</p>
<p>are are incentivized like permanently</p>
<p>through the reward system it basically</p>
<p>means though dilution will happen
there</p>
<p>they're sort of percent or their ratio</p>
<p>of their state compared to everyone
else</p>
<p>will remain the same they're sort of</p>
<p>dilution protected and everyone else</p>
<p>gets everyone who's not part of the</p>
<p>validation nomination sort of system</p>
<p>will get diluted and because that's in</p>
<p>place it doesn't make so much sense to</p>
<p>then</p>
<p>reward them extra for for the</p>
<p>transaction fees that said it's not a</p>
<p>final decision as I said and I'm like</p>
<p>you know something to talk about over</p>
<p>the next few months and see if there's
a</p>
<p>compelling reason yeah I mean</p>
<p>potentially I'm not sure we really see</p>
<p>that in in real life there's plenty of</p>
<p>instances where you know aetherium</p>
<p>transactions go through four zero gas</p>
<p>price censorship you know as always
can</p>
<p>always happen you know it's just if</p>
<p>you're going out of your way to censor</p>
<p>some transactions there's a cost</p>
<p>associated that selection mechanism
and</p>
<p>that cost may be insignificant but
that</p>
<p>cost may be the price you're willing
to</p>
<p>pay maybe and it may be substantially</p>
<p>greater than the cost of you know not</p>
<p>collecting a couple of micro sense of</p>
<p>fees so for sure but if they do then</p>
<p>adding a small transaction fee isn't</p>
<p>really going to make much difference</p>
<p>unless unless you know the
transactions</p>
<p>that they're dealing with our micro</p>
<p>transactions in which case</p>
<p>yeah yeah I mean that's it so staking
is</p>
<p>more of a sort of collective pursuit</p>
<p>rather than something cutthroat yeah I</p>
<p>got a feeling there was another reason</p>
<p>but I can't remember what it was now
but</p>
<p>as I say it's not something that I'm</p>
<p>happy for this to be a continuing</p>
<p>conversation and you know if it turns</p>
<p>out that it does make sense for the</p>
<p>block producer to to take these fees</p>
<p>then this point is just the simplest</p>
<p>code like I don't it's one line of
code</p>
<p>for you basically</p>
<p>suppose you have 20% of the chain that</p>
<p>is 20% of the total capital contained
on</p>
<p>the chain total tokens that is part of</p>
<p>the staking system and market the
market</p>
<p>effects are such that 5% of that 20%
so</p>
<p>the total are being replicated to root</p>
<p>for their rewards so I mean this is a</p>
<p>half the reward right 25 percent but</p>
<p>whatever then in order to prevent the</p>
<p>rich get richer situation of the chain</p>
<p>where validators just everyone gets</p>
<p>diluted and all of that dilution is</p>
<p>favoring the validators their
percentage</p>
<p>of the total state just keeps going up</p>
<p>and up and up and up until eventually</p>
<p>their total of the amount of the chain</p>
<p>approach is like 100 percent to avoid</p>
<p>that situation we place a well if we</p>
<p>save 20 to 80 then we place an
according</p>
<p>amount so for X in our 20 to 80 ratio
of</p>
<p>the amount of that reward goes into a</p>
<p>pot right so</p>
<p>so we've got 20% a quarter of that
gets</p>
<p>paid to the to the validators so we're</p>
<p>going to mint 25% of of the chains</p>
<p>tokens again yep so we're going to</p>
<p>dilute by 25% we take a fifth of that</p>
<p>so validators whatever so that's that</p>
<p>and with the other 20% which which</p>
<p>basically is &#8533; of 80</p>
<p>sorry &frac14; of 84 fits over 25 that gets</p>
<p>placed into a sort of community Dow
for</p>
<p>the chain not too dissimilar from you</p>
<p>know the thing on - or or even like
the</p>
<p>Dow although let's boogie hopefully
and</p>
<p>that will be used as like there's</p>
<p>already a treasury module in here it's</p>
<p>very simple but there's the treasury</p>
<p>module actually sort of put forward
ways</p>
<p>of spending and and they can be voted
on</p>
<p>and then the idea is to basically
allow</p>
<p>additional modules to spend money from</p>
<p>this pot and they can be sort of</p>
<p>integrated through chain upgrades it</p>
<p>could also be a lottery it can also be
a</p>
<p>reward for people that like accounts</p>
<p>that are willing to bet on the price</p>
<p>going up if you got an oracle feed of</p>
<p>the price so if you're willing to bet</p>
<p>that the price goes up and the price</p>
<p>does indeed go up after a period of
time</p>
<p>then then you can get paid from this
pot</p>
<p>and if it goes down then you can your</p>
<p>money gets put into the pot so there's</p>
<p>all sorts of interesting don't think</p>
<p>about that too hard there's all sorts
of</p>
<p>interesting oh yeah you can like what
I</p>
<p>showed you like the thing is what I
was</p>
<p>trying to think of a toy runtime
module</p>
<p>that would extol like that I could
code</p>
<p>live you know that wasn't so big that
I</p>
<p>couldn't code live but also that sort
of</p>
<p>got across</p>
<p>a degree of sort of generality that
this</p>
<p>provides and unfortunately everything</p>
<p>that you can code live pretty much
will</p>
<p>look like a smart contract because
smart</p>
<p>contracts are just tiny little bits of</p>
<p>code that you add to block chains but</p>
<p>what I did with with the extra module</p>
<p>although it looked a bit like a smart</p>
<p>contract it worked very differently</p>
<p>right this this was a deployment of
code</p>
<p>that would be run natively and that</p>
<p>would sit in principle in the same
place</p>
<p>as the smart contract as the smart</p>
<p>contract bit of the etherium state</p>
<p>transition function or the EVM or</p>
<p>whatever else you want to think about</p>
<p>code I won't even consider coding an
EVM</p>
<p>interpreter as a smart contract that</p>
<p>would just be zany right I'll just be</p>
<p>Cray would run so slow and it'd be</p>
<p>really horrible but you could do that
in</p>
<p>one of these modules because it
operates</p>
<p>at like a 10 X low lower level so you</p>
<p>get that 10 X in in performance and in</p>
<p>well it uses that it uses some
substrate</p>
<p>runtime module for its pyro change</p>
<p>management yeah I don't call it</p>
<p>delegation because that's kind of got
a</p>
<p>loaded meaning now that EOS uses it in</p>
<p>particular when you delegate a stake
you</p>
<p>don't get punished if the if the party</p>
<p>that you delegate to misbehaves</p>
<p>and that's usually problematic in
terms</p>
<p>of getting incentive correctness so we</p>
<p>call it nominating and they're
critical</p>
<p>as I say the critical difference is
that</p>
<p>when you nominate a validator with
your</p>
<p>stake they you lose your stake if they</p>
<p>misbehave I mean they lose those first</p>
<p>but if they don't have enough to pay
for</p>
<p>the misbehavior then you lose yours</p>
<p>yeah yeah so you this is to get around</p>
<p>the nothing at stake issue long term</p>
<p>long range attack yeah so yeah there's</p>
<p>it it's bonded the moment the
assumption</p>
<p>is it'll be about three months bonding</p>
<p>period but it will be at least as big
as</p>
<p>the expected period between releases
of</p>
<p>the of the binary of any software that</p>
<p>sort of interprets this chain so no
the</p>
<p>assumption is that the most recent</p>
<p>checkpoint will go into the software</p>
<p>itself and the bonding period is</p>
<p>sufficiently large that and the
software</p>
<p>will be released sufficiently
frequently</p>
<p>that the most recent bond most recent</p>
<p>software release will be holding
current</p>
<p>validators currently bonded validators</p>
<p>to account okay Sagan you can if you
put</p>
<p>it in yourself I use fixed point for</p>
<p>anything that needs point one more if</p>
<p>you're a move floating point then it's</p>
<p>deterministic cool okay I call an end
to</p>
<p>this are you do you want to do it you</p>
<p>wanna do the end</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://twitter.com/arman_riazi_science" target="_blank" rel="noopener" title="ArmanRiazi on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/armanriazi" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://linkedin.com/in/armanriazi" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "search.share", "announce.dismiss", "content.tooltips", "content.code.annotate", "header.autohide", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "toc.follow"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6e54b5cd.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>